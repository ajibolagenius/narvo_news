{
  "project_name": "Narvo Audio Player Redesign",
  "design_philosophy": {
    "identity": "E1_Anti_AI",
    "core_aesthetic": "Precision Broadcast / Military Command",
    "principles": [
      "No Rounded Corners (Max 2px if absolutely necessary)",
      "High Contrast Signal Colors (Green #628141 on Dark #1B211A)",
      "Monospace Everything for Data",
      "Dense Information Density",
      "Tactile / Haptic Visuals (Borders, Outlines, Ticks)"
    ]
  },
  "typography": {
    "primary": "Space Grotesk (Headings)",
    "secondary": "Inter (Long Form Text)",
    "data": "JetBrains Mono (Time, Metadata, Status, Labels)",
    "rules": {
      "player_time": "font-mono text-xs tracking-wider",
      "track_title": "font-display font-medium text-sm uppercase tracking-tight",
      "track_source": "font-mono text-[9px] text-narvo-text-secondary uppercase tracking-widest",
      "labels": "font-mono text-[9px] text-narvo-text-dim uppercase"
    }
  },
  "colors": {
    "palette": {
      "signal_green": "rgb(98, 129, 65)",
      "signal_green_hex": "#628141",
      "dark_bg": "rgb(27, 33, 26)",
      "surface": "rgb(36, 43, 35)",
      "text_primary": "rgb(242, 242, 242)",
      "text_secondary": "rgb(139, 174, 102)",
      "alert": "rgb(255, 59, 48)"
    },
    "usage": {
      "player_background": "bg-[rgb(var(--color-bg))]",
      "player_border": "border-t border-[rgb(var(--color-border))]",
      "progress_bar_filled": "bg-[rgb(var(--color-border))]",
      "progress_bar_track": "bg-[rgb(var(--color-surface))]",
      "active_element": "text-[rgb(var(--color-primary))]",
      "inactive_element": "text-[rgb(var(--color-text-dim))]"
    }
  },
  "layout_strategy": {
    "desktop": {
      "type": "fixed_bottom_bar",
      "height": "h-20",
      "grid": "flex items-center justify-between px-6 gap-6",
      "sections": {
        "left": "Track Info (Art + Title + Source) - 25% width",
        "center": "Transport Controls + Waveform Progress - 50% width",
        "right": "Volume + Queue Toggle + Options - 25% width"
      }
    },
    "mobile": {
      "mini_player": {
        "position": "fixed bottom-[60px] left-0 right-0 z-40",
        "style": "h-14 bg-[rgb(var(--color-bg))] border-t border-[rgb(var(--color-border))] flex items-center justify-between px-4 shadow-[0_-4px_20px_rgba(0,0,0,0.5)]",
        "elements": "Play/Pause Button (Right), Track Title (Left), Progress Indicator (Top Border)"
      },
      "full_modal": {
        "position": "fixed inset-0 z-50 bg-[rgb(var(--color-bg))]",
        "animation": "Slide Up from Bottom",
        "layout": "flex flex-col p-6 pt-12 gap-8",
        "elements": [
          "Drag Handle (Visual only, sharp line)",
          "Large Album Art (Square, Bordered)",
          "Track Title & Source (Large, Marquee if needed)",
          "Waveform Visualization (CSS Animated Bars)",
          "Scrubber (Sharp rectangle thumb)",
          "Main Controls (Large Play/Pause, Skip)",
          "Volume & Queue Row"
        ]
      }
    }
  },
  "components": {
    "buttons": {
      "primary": "rounded-none border border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-border))] hover:text-white transition-all active:scale-95",
      "icon_only": "p-2 hover:text-[rgb(var(--color-primary))] transition-colors rounded-none",
      "play_pause_large": "w-16 h-16 flex items-center justify-center bg-[rgb(var(--color-border))] text-white hover:brightness-110 active:scale-95 transition-all"
    },
    "progress_bar": {
      "container": "relative h-8 w-full cursor-pointer group flex items-center",
      "track": "absolute top-1/2 left-0 right-0 h-[2px] bg-[rgb(var(--color-surface))]",
      "fill": "absolute top-1/2 left-0 h-[2px] bg-[rgb(var(--color-primary))]",
      "thumb": "absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-[rgb(var(--color-primary))] opacity-0 group-hover:opacity-100 transition-opacity rounded-none",
      "waveform_hint": "absolute inset-0 flex items-center gap-[2px] opacity-20 pointer-events-none"
    },
    "visualizations": {
      "waveform_bars": "w-1 bg-[rgb(var(--color-primary))] animate-pulse-slow"
    }
  },
  "motion": {
    "default_transition": "transition-all duration-200 ease-out",
    "modal_enter": { "y": "100%", "opacity": 0 },
    "modal_active": { "y": 0, "opacity": 1 },
    "modal_exit": { "y": "100%", "opacity": 0 },
    "mini_player_enter": { "y": 20, "opacity": 0 },
    "mini_player_active": { "y": 0, "opacity": 1 }
  },
  "accessibility": {
    "contrast": "Ensure text is text-narvo-text-primary on dark backgrounds",
    "touch_targets": "Minimum 44x44px for mobile controls",
    "aria_labels": "All icon-only buttons MUST have aria-label and title"
  },
  "instructions_to_main_agent": [
    "1. Modify /app/frontend/src/components/AudioPlayerBar.js to import and use the new structure.",
    "2. Create internal sub-components 'DesktopPlayer' and 'MobilePlayer' within the file or distinct files if preferred.",
    "3. Implement the 'MobilePlayer' using a Portal or fixed positioning to overlay the entire screen when expanded.",
    "4. Ensure the MiniPlayer sits exactly above the bottom navigation bar (approx bottom-16).",
    "5. Use Framer Motion 'AnimatePresence' for the Mobile Player expansion.",
    "6. ADD 'data-testid' to ALL interactive elements (play-pause-btn, skip-btn, scrubber, etc.).",
    "7. DO NOT break the existing 'useAudio' hook integration.",
    "8. Use Phosphor Icons: Play, Pause, SkipForward, SkipBack, SpeakerHigh, Playlist, CaretDown (for minimizing).",
    "9. Implement the 'Waveform' visualization using a row of simple div bars with random heights/animations to simulate audio activity.",
    "10. For the 'Green' primary, use the CSS variable --color-border (rgb(98, 129, 65)) as it matches the requested #628141."
  ],
  "universal_guidelines": [
    "You tend to converge toward generic, 'on distribution' outputs. Avoid this.",
    "Dark colors look good when used independently without gradients. DO NOT use dark colors as gradients",
    "Don't make generic centered layouts, simplistic gradients, and uniform styling.",
    "Use sharp edges. No border-radius.",
    "Every interaction needs micro-animations.",
    "Use sonner for toasts."
  ]
}
