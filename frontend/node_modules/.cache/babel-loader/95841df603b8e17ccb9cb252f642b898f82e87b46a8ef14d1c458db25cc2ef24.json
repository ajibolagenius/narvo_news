{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAudio}from'../contexts/AudioContext';import{Play,Pause}from'lucide-react';import Skeleton,{ListSkeleton}from'../components/Skeleton';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_BACKEND_URL||'';const MorningBriefingPage=()=>{var _briefing$stories;const[briefing,setBriefing]=useState(null);const[loading,setLoading]=useState(false);const{playTrack,currentTrack,isPlaying}=useAudio();const generateBriefing=async()=>{setLoading(true);try{const res=await fetch(\"\".concat(API_URL,\"/api/briefing/generate?voice_id=nova\"));if(res.ok)setBriefing(await res.json());}catch(e){console.error(e);}setLoading(false);};useEffect(()=>{generateBriefing();},[]);return/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 flex flex-col bg-background-dark min-w-0\",\"data-testid\":\"briefing-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h-12 md:h-14 flex items-center justify-between px-4 md:px-8 bg-surface/30 narvo-border-b shrink-0\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"mono-ui text-[10px] md:text-xs text-forest\",children:[\"MODULE: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-primary\",children:\"MORNING_BRIEFING\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[10px] md:text-xs text-forest\",children:\"DAILY_DIGEST\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pb-20 md:pb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"narvo-border bg-surface/30 p-6 md:p-8\",children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",className:\"w-32 h-3 mb-4\"}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",className:\"w-3/4 h-8 mb-3\"}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",className:\"w-24 h-5 mb-6\"}),/*#__PURE__*/_jsx(Skeleton,{className:\"w-48 h-12\"})]}),/*#__PURE__*/_jsx(ListSkeleton,{count:4})]}):briefing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"narvo-border bg-surface/50 p-5 md:p-8 mb-4 md:mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] md:text-[10px] text-forest block mb-2 md:mb-3 font-bold tracking-widest\",children:\"PRIORITY_DIGEST\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"font-display text-xl md:text-2xl text-white mb-2 md:mb-3 uppercase\",children:briefing.title}),/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] md:text-[10px] text-forest narvo-border px-2 py-0.5 inline-block mb-4 md:mb-6\",children:briefing.duration_estimate}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>playTrack({id:briefing.id,title:briefing.title,audio_url:briefing.audio_url}),className:\"bg-primary text-background-dark font-display font-bold px-4 md:px-6 py-2.5 md:py-3 text-sm md:text-base hover:bg-white transition-all flex items-center gap-2 md:gap-3\",\"data-testid\":\"play-briefing-btn\",children:[(currentTrack===null||currentTrack===void 0?void 0:currentTrack.id)===briefing.id&&isPlaying?/*#__PURE__*/_jsx(Pause,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Play,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:(currentTrack===null||currentTrack===void 0?void 0:currentTrack.id)===briefing.id&&isPlaying?'PAUSE':'PLAY BRIEFING'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"narvo-border bg-surface/20 divide-y divide-forest/10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 md:p-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] md:text-[10px] text-forest font-bold tracking-widest\",children:\"STORIES_INCLUDED\"})}),(_briefing$stories=briefing.stories)===null||_briefing$stories===void 0?void 0:_briefing$stories.map((story,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 md:p-4 flex gap-2 md:gap-3 hover:bg-surface/40 transition-colors\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] md:text-[10px] text-primary font-bold shrink-0\",children:String(i+1).padStart(2,'0')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-300 text-xs md:text-sm\",children:story.title})]},i))]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 md:py-20\",children:/*#__PURE__*/_jsx(\"button\",{onClick:generateBriefing,className:\"bg-primary text-background-dark font-display font-bold px-6 md:px-8 py-3 md:py-4 text-sm md:text-base hover:bg-white transition-all\",\"data-testid\":\"generate-briefing-btn\",children:\"[GENERATE BRIEFING]\"})})})})]});};export default MorningBriefingPage;","map":{"version":3,"names":["React","useState","useEffect","useAudio","Play","Pause","Skeleton","ListSkeleton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_BACKEND_URL","MorningBriefingPage","_briefing$stories","briefing","setBriefing","loading","setLoading","playTrack","currentTrack","isPlaying","generateBriefing","res","fetch","concat","ok","json","e","console","error","className","children","variant","count","title","duration_estimate","onClick","id","audio_url","stories","map","story","i","String","padStart"],"sources":["/app/frontend/src/pages/MorningBriefingPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAudio } from '../contexts/AudioContext';\nimport { Play, Pause } from 'lucide-react';\nimport Skeleton, { ListSkeleton } from '../components/Skeleton';\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || '';\n\nconst MorningBriefingPage = () => {\n  const [briefing, setBriefing] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const { playTrack, currentTrack, isPlaying } = useAudio();\n\n  const generateBriefing = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(`${API_URL}/api/briefing/generate?voice_id=nova`);\n      if (res.ok) setBriefing(await res.json());\n    } catch (e) { console.error(e); }\n    setLoading(false);\n  };\n\n  useEffect(() => { generateBriefing(); }, []);\n\n  return (\n    <main className=\"flex-1 flex flex-col bg-background-dark min-w-0\" data-testid=\"briefing-page\">\n      <div className=\"h-12 md:h-14 flex items-center justify-between px-4 md:px-8 bg-surface/30 narvo-border-b shrink-0\">\n        <span className=\"mono-ui text-[10px] md:text-xs text-forest\">MODULE: <span className=\"text-primary\">MORNING_BRIEFING</span></span>\n        <span className=\"mono-ui text-[10px] md:text-xs text-forest\">DAILY_DIGEST</span>\n      </div>\n      <div className=\"flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pb-20 md:pb-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          {loading ? (\n            <div className=\"space-y-6\">\n              <div className=\"narvo-border bg-surface/30 p-6 md:p-8\">\n                <Skeleton variant=\"text\" className=\"w-32 h-3 mb-4\" />\n                <Skeleton variant=\"text\" className=\"w-3/4 h-8 mb-3\" />\n                <Skeleton variant=\"text\" className=\"w-24 h-5 mb-6\" />\n                <Skeleton className=\"w-48 h-12\" />\n              </div>\n              <ListSkeleton count={4} />\n            </div>\n          ) : briefing ? (\n            <>\n              <div className=\"narvo-border bg-surface/50 p-5 md:p-8 mb-4 md:mb-6\">\n                <span className=\"mono-ui text-[9px] md:text-[10px] text-forest block mb-2 md:mb-3 font-bold tracking-widest\">PRIORITY_DIGEST</span>\n                <h2 className=\"font-display text-xl md:text-2xl text-white mb-2 md:mb-3 uppercase\">{briefing.title}</h2>\n                <span className=\"mono-ui text-[9px] md:text-[10px] text-forest narvo-border px-2 py-0.5 inline-block mb-4 md:mb-6\">{briefing.duration_estimate}</span>\n                <button onClick={() => playTrack({ id: briefing.id, title: briefing.title, audio_url: briefing.audio_url })} className=\"bg-primary text-background-dark font-display font-bold px-4 md:px-6 py-2.5 md:py-3 text-sm md:text-base hover:bg-white transition-all flex items-center gap-2 md:gap-3\" data-testid=\"play-briefing-btn\">\n                  {currentTrack?.id === briefing.id && isPlaying ? <Pause className=\"w-5 h-5\" /> : <Play className=\"w-5 h-5\" />}\n                  <span>{currentTrack?.id === briefing.id && isPlaying ? 'PAUSE' : 'PLAY BRIEFING'}</span>\n                </button>\n              </div>\n              <div className=\"narvo-border bg-surface/20 divide-y divide-forest/10\">\n                <div className=\"p-3 md:p-4\"><span className=\"mono-ui text-[9px] md:text-[10px] text-forest font-bold tracking-widest\">STORIES_INCLUDED</span></div>\n                {briefing.stories?.map((story, i) => (\n                  <div key={i} className=\"p-3 md:p-4 flex gap-2 md:gap-3 hover:bg-surface/40 transition-colors\">\n                    <span className=\"mono-ui text-[9px] md:text-[10px] text-primary font-bold shrink-0\">{String(i + 1).padStart(2, '0')}</span>\n                    <span className=\"text-slate-300 text-xs md:text-sm\">{story.title}</span>\n                  </div>\n                ))}\n              </div>\n            </>\n          ) : (\n            <div className=\"text-center py-12 md:py-20\">\n              <button onClick={generateBriefing} className=\"bg-primary text-background-dark font-display font-bold px-6 md:px-8 py-3 md:py-4 text-sm md:text-base hover:bg-white transition-all\" data-testid=\"generate-briefing-btn\">\n                [GENERATE BRIEFING]\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </main>\n  );\n};\n\nexport default MorningBriefingPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}