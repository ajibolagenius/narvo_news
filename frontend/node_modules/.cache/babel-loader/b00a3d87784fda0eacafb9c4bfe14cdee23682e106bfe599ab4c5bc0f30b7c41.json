{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAudio}from'../contexts/AudioContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_BACKEND_URL||'';const MorningBriefingPage=()=>{var _briefing$stories;const navigate=useNavigate();const[briefing,setBriefing]=useState(null);const[loading,setLoading]=useState(false);const{playTrack,currentTrack,isPlaying}=useAudio();const generateBriefing=async()=>{setLoading(true);try{const response=await fetch(\"\".concat(API_URL,\"/api/briefing/generate?voice_id=nova\"));if(response.ok)setBriefing(await response.json());}catch(e){console.error(e);}setLoading(false);};useEffect(()=>{generateBriefing();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-background-dark\",\"data-testid\":\"briefing-page\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"border-b border-forest\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-6 py-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"mono-ui text-xs text-forest hover:text-primary\",children:\"\\u2190 [BACK]\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-display text-lg text-white\",children:\"[Morning Briefing]\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto p-6\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-20\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-xs text-text-secondary\",children:\"[GENERATING BRIEFING...]\"})}):briefing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border border-forest bg-surface p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-display text-xl text-white mb-2\",children:briefing.title}),/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] text-forest border border-forest px-1\",children:briefing.duration_estimate}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>playTrack({id:briefing.id,title:briefing.title,audio_url:briefing.audio_url}),className:\"bg-primary text-background-dark font-display font-bold px-6 py-3 hover:bg-white transition-all mt-4 block\",\"data-testid\":\"play-briefing-btn\",children:(currentTrack===null||currentTrack===void 0?void 0:currentTrack.id)===briefing.id&&isPlaying?'[PAUSE]':'[PLAY BRIEFING]'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-forest bg-surface p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-display text-lg text-white mb-4\",children:\"Stories Included\"}),(_briefing$stories=briefing.stories)===null||_briefing$stories===void 0?void 0:_briefing$stories.map((story,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-forest p-4 mb-2 flex gap-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"mono-ui text-[10px] text-primary\",children:[i+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-400 text-sm\",children:story.title})]},i))]})]}):/*#__PURE__*/_jsx(\"button\",{onClick:generateBriefing,className:\"bg-primary text-background-dark font-display font-bold px-6 py-3 hover:bg-white transition-all\",\"data-testid\":\"generate-briefing-btn\",children:\"[GENERATE BRIEFING]\"})})]});};export default MorningBriefingPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAudio","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_BACKEND_URL","MorningBriefingPage","_briefing$stories","navigate","briefing","setBriefing","loading","setLoading","playTrack","currentTrack","isPlaying","generateBriefing","response","fetch","concat","ok","json","e","console","error","className","children","onClick","title","duration_estimate","id","audio_url","stories","map","story","i"],"sources":["/app/frontend/src/pages/MorningBriefingPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAudio } from '../contexts/AudioContext';\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || '';\n\nconst MorningBriefingPage = () => {\n  const navigate = useNavigate();\n  const [briefing, setBriefing] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const { playTrack, currentTrack, isPlaying } = useAudio();\n\n  const generateBriefing = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/api/briefing/generate?voice_id=nova`);\n      if (response.ok) setBriefing(await response.json());\n    } catch (e) { console.error(e); }\n    setLoading(false);\n  };\n\n  useEffect(() => { generateBriefing(); }, []);\n\n  return (\n    <div className=\"min-h-screen bg-background-dark\" data-testid=\"briefing-page\">\n      <header className=\"border-b border-forest\">\n        <div className=\"flex items-center justify-between px-6 py-4\">\n          <button onClick={() => navigate('/dashboard')} className=\"mono-ui text-xs text-forest hover:text-primary\">&larr; [BACK]</button>\n          <span className=\"font-display text-lg text-white\">[Morning Briefing]</span>\n        </div>\n      </header>\n      <div className=\"max-w-4xl mx-auto p-6\">\n        {loading ? (\n          <div className=\"text-center py-20\"><span className=\"mono-ui text-xs text-text-secondary\">[GENERATING BRIEFING...]</span></div>\n        ) : briefing ? (\n          <>\n            <div className=\"border border-forest bg-surface p-6 mb-6\">\n              <h2 className=\"font-display text-xl text-white mb-2\">{briefing.title}</h2>\n              <span className=\"mono-ui text-[9px] text-forest border border-forest px-1\">{briefing.duration_estimate}</span>\n              <button onClick={() => playTrack({ id: briefing.id, title: briefing.title, audio_url: briefing.audio_url })} className=\"bg-primary text-background-dark font-display font-bold px-6 py-3 hover:bg-white transition-all mt-4 block\" data-testid=\"play-briefing-btn\">\n                {currentTrack?.id === briefing.id && isPlaying ? '[PAUSE]' : '[PLAY BRIEFING]'}\n              </button>\n            </div>\n            <div className=\"border border-forest bg-surface p-6\">\n              <h3 className=\"font-display text-lg text-white mb-4\">Stories Included</h3>\n              {briefing.stories?.map((story, i) => (\n                <div key={i} className=\"border border-forest p-4 mb-2 flex gap-3\">\n                  <span className=\"mono-ui text-[10px] text-primary\">{i + 1}.</span>\n                  <span className=\"text-slate-400 text-sm\">{story.title}</span>\n                </div>\n              ))}\n            </div>\n          </>\n        ) : (\n          <button onClick={generateBriefing} className=\"bg-primary text-background-dark font-display font-bold px-6 py-3 hover:bg-white transition-all\" data-testid=\"generate-briefing-btn\">\n            [GENERATE BRIEFING]\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MorningBriefingPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}