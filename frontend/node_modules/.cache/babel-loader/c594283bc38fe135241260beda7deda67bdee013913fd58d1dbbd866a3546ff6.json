{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useAudio}from'../contexts/AudioContext';import{useBookmarks}from'../hooks/useBookmarks';import LoadingScreen from'../components/LoadingScreen';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_BACKEND_URL||'';const NewsDetailPage=()=>{var _news$category,_news$key_takeaways;const{id}=useParams();const navigate=useNavigate();const[news,setNews]=useState(null);const{playTrack,currentTrack,isPlaying}=useAudio();const{isBookmarked,addBookmark,removeBookmark}=useBookmarks();useEffect(()=>{fetch(\"\".concat(API_URL,\"/api/news/\").concat(id)).then(res=>res.json()).then(setNews).catch(()=>navigate('/dashboard'));},[id,navigate]);if(!news)return/*#__PURE__*/_jsx(LoadingScreen,{duration:2000});const toggleBookmark=()=>{if(isBookmarked(news.id))removeBookmark(news.id);else addBookmark(news);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-background-dark\",\"data-testid\":\"news-detail-page\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"border-b border-forest\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-6 py-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"mono-ui text-xs text-forest hover:text-primary\",\"data-testid\":\"back-btn\",children:\"\\u2190 [BACK]\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"mono-ui text-[10px] text-forest\",children:[\"[TRUTH TAG: \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary\",children:[news.truth_score,\"%\"]}),\"]\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] text-primary border border-primary px-1 mb-4 inline-block\",children:(_news$category=news.category)===null||_news$category===void 0?void 0:_news$category.toUpperCase()}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-display text-3xl text-white mb-6\",children:news.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-forest bg-surface p-6 mb-8 flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>playTrack(news),className:\"bg-primary text-background-dark font-display font-bold px-6 py-3 hover:bg-white transition-all flex items-center gap-2\",\"data-testid\":\"play-story-btn\",children:(currentTrack===null||currentTrack===void 0?void 0:currentTrack.id)===news.id&&isPlaying?'[PAUSE BROADCAST]':'[OYA, PLAY]'}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleBookmark,className:\"border px-4 py-3 mono-ui text-xs font-bold transition-all \".concat(isBookmarked(news.id)?'border-primary bg-primary/10 text-primary':'border-forest text-forest hover:border-primary hover:text-primary'),\"data-testid\":\"bookmark-detail-btn\",children:isBookmarked(news.id)?'[SAVED]':'[SAVE STORY]'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-forest bg-surface p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-display text-lg text-white mb-4\",children:\"[The Full Gist]\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 leading-relaxed\",children:news.narrative||news.summary})]}),((_news$key_takeaways=news.key_takeaways)===null||_news$key_takeaways===void 0?void 0:_news$key_takeaways.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"border border-forest bg-surface p-6 mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-display text-lg text-white mb-4\",children:\"[Key Takeaways]\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:news.key_takeaways.map((t,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex gap-3 text-slate-400 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[10px] text-primary shrink-0\",children:String(i+1).padStart(2,'0')}),/*#__PURE__*/_jsx(\"span\",{children:t})]},i))})]})]})]});};export default NewsDetailPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAudio","useBookmarks","LoadingScreen","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_BACKEND_URL","NewsDetailPage","_news$category","_news$key_takeaways","id","navigate","news","setNews","playTrack","currentTrack","isPlaying","isBookmarked","addBookmark","removeBookmark","fetch","concat","then","res","json","catch","duration","toggleBookmark","className","children","onClick","truth_score","category","toUpperCase","title","narrative","summary","key_takeaways","length","map","t","i","String","padStart"],"sources":["/app/frontend/src/pages/NewsDetailPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAudio } from '../contexts/AudioContext';\nimport { useBookmarks } from '../hooks/useBookmarks';\nimport LoadingScreen from '../components/LoadingScreen';\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || '';\n\nconst NewsDetailPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [news, setNews] = useState(null);\n  const { playTrack, currentTrack, isPlaying } = useAudio();\n  const { isBookmarked, addBookmark, removeBookmark } = useBookmarks();\n\n  useEffect(() => {\n    fetch(`${API_URL}/api/news/${id}`).then(res => res.json()).then(setNews).catch(() => navigate('/dashboard'));\n  }, [id, navigate]);\n\n  if (!news) return <LoadingScreen duration={2000} />;\n\n  const toggleBookmark = () => {\n    if (isBookmarked(news.id)) removeBookmark(news.id);\n    else addBookmark(news);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background-dark\" data-testid=\"news-detail-page\">\n      <header className=\"border-b border-forest\">\n        <div className=\"flex items-center justify-between px-6 py-4\">\n          <button onClick={() => navigate('/dashboard')} className=\"mono-ui text-xs text-forest hover:text-primary\" data-testid=\"back-btn\">&larr; [BACK]</button>\n          <span className=\"mono-ui text-[10px] text-forest\">[TRUTH TAG: <span className=\"text-primary\">{news.truth_score}%</span>]</span>\n        </div>\n      </header>\n      <div className=\"max-w-4xl mx-auto p-6\">\n        <span className=\"mono-ui text-[9px] text-primary border border-primary px-1 mb-4 inline-block\">{news.category?.toUpperCase()}</span>\n        <h1 className=\"font-display text-3xl text-white mb-6\">{news.title}</h1>\n        <div className=\"border border-forest bg-surface p-6 mb-8 flex items-center gap-4\">\n          <button onClick={() => playTrack(news)} className=\"bg-primary text-background-dark font-display font-bold px-6 py-3 hover:bg-white transition-all flex items-center gap-2\" data-testid=\"play-story-btn\">\n            {currentTrack?.id === news.id && isPlaying ? '[PAUSE BROADCAST]' : '[OYA, PLAY]'}\n          </button>\n          <button onClick={toggleBookmark} className={`border px-4 py-3 mono-ui text-xs font-bold transition-all ${isBookmarked(news.id) ? 'border-primary bg-primary/10 text-primary' : 'border-forest text-forest hover:border-primary hover:text-primary'}`} data-testid=\"bookmark-detail-btn\">\n            {isBookmarked(news.id) ? '[SAVED]' : '[SAVE STORY]'}\n          </button>\n        </div>\n        <div className=\"border border-forest bg-surface p-6\">\n          <h3 className=\"font-display text-lg text-white mb-4\">[The Full Gist]</h3>\n          <p className=\"text-slate-400 leading-relaxed\">{news.narrative || news.summary}</p>\n        </div>\n        {news.key_takeaways?.length > 0 && (\n          <div className=\"border border-forest bg-surface p-6 mt-4\">\n            <h3 className=\"font-display text-lg text-white mb-4\">[Key Takeaways]</h3>\n            <ul className=\"space-y-2\">\n              {news.key_takeaways.map((t, i) => (\n                <li key={i} className=\"flex gap-3 text-slate-400 text-sm\">\n                  <span className=\"mono-ui text-[10px] text-primary shrink-0\">{String(i+1).padStart(2,'0')}</span>\n                  <span>{t}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NewsDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}