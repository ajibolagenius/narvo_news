{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_BACKEND_URL||'';const SearchPage=()=>{const navigate=useNavigate();const[query,setQuery]=useState('');const[results,setResults]=useState([]);const[allNews,setAllNews]=useState([]);useEffect(()=>{fetch(\"\".concat(API_URL,\"/api/news?limit=30\")).then(res=>res.json()).then(setAllNews).catch(console.error);},[]);useEffect(()=>{if(!query.trim()){setResults([]);return;}const q=query.toLowerCase();setResults(allNews.filter(n=>{var _n$summary;return n.title.toLowerCase().includes(q)||((_n$summary=n.summary)===null||_n$summary===void 0?void 0:_n$summary.toLowerCase().includes(q));}));},[query,allNews]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-background-dark\",\"data-testid\":\"search-page\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"border-b border-forest\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-6 py-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"mono-ui text-xs text-forest hover:text-primary\",children:\"\\u2190 [BACK]\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-display text-lg text-white\",children:\"[Search Center]\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Search news...\",className:\"w-full bg-surface border border-forest text-white p-4 mono-ui mb-6\",\"data-testid\":\"search-input\"}),results.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",\"data-testid\":\"search-results\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"mono-ui text-[10px] text-forest\",children:[results.length,\" RESULTS\"]}),results.map(item=>{var _item$category;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-forest bg-surface p-4 cursor-pointer hover:border-primary transition-colors\",onClick:()=>navigate(\"/news/\".concat(item.id)),children:[/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] text-primary\",children:(_item$category=item.category)===null||_item$category===void 0?void 0:_item$category.toUpperCase()}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-display text-white mt-1\",children:item.title}),/*#__PURE__*/_jsx(\"span\",{className:\"mono-ui text-[9px] text-forest\",children:item.source})]},item.id);})]}),query&&results.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"mono-ui text-xs text-forest\",children:[\"NO RESULTS FOR \\\"\",query.toUpperCase(),\"\\\"\"]})})]})]});};export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_BACKEND_URL","SearchPage","navigate","query","setQuery","results","setResults","allNews","setAllNews","fetch","concat","then","res","json","catch","console","error","trim","q","toLowerCase","filter","n","_n$summary","title","includes","summary","className","children","onClick","type","value","onChange","e","target","placeholder","length","map","item","_item$category","id","category","toUpperCase","source"],"sources":["/app/frontend/src/pages/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || '';\n\nconst SearchPage = () => {\n  const navigate = useNavigate();\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [allNews, setAllNews] = useState([]);\n\n  useEffect(() => {\n    fetch(`${API_URL}/api/news?limit=30`).then(res => res.json()).then(setAllNews).catch(console.error);\n  }, []);\n\n  useEffect(() => {\n    if (!query.trim()) { setResults([]); return; }\n    const q = query.toLowerCase();\n    setResults(allNews.filter(n => n.title.toLowerCase().includes(q) || n.summary?.toLowerCase().includes(q)));\n  }, [query, allNews]);\n\n  return (\n    <div className=\"min-h-screen bg-background-dark\" data-testid=\"search-page\">\n      <header className=\"border-b border-forest\">\n        <div className=\"flex items-center justify-between px-6 py-4\">\n          <button onClick={() => navigate('/dashboard')} className=\"mono-ui text-xs text-forest hover:text-primary\">&larr; [BACK]</button>\n          <span className=\"font-display text-lg text-white\">[Search Center]</span>\n        </div>\n      </header>\n      <div className=\"max-w-4xl mx-auto p-6\">\n        <input type=\"text\" value={query} onChange={e => setQuery(e.target.value)} placeholder=\"Search news...\" className=\"w-full bg-surface border border-forest text-white p-4 mono-ui mb-6\" data-testid=\"search-input\" />\n        {results.length > 0 && (\n          <div className=\"space-y-3\" data-testid=\"search-results\">\n            <span className=\"mono-ui text-[10px] text-forest\">{results.length} RESULTS</span>\n            {results.map(item => (\n              <div key={item.id} className=\"border border-forest bg-surface p-4 cursor-pointer hover:border-primary transition-colors\" onClick={() => navigate(`/news/${item.id}`)}>\n                <span className=\"mono-ui text-[9px] text-primary\">{item.category?.toUpperCase()}</span>\n                <h3 className=\"font-display text-white mt-1\">{item.title}</h3>\n                <span className=\"mono-ui text-[9px] text-forest\">{item.source}</span>\n              </div>\n            ))}\n          </div>\n        )}\n        {query && results.length === 0 && (\n          <div className=\"text-center py-12\"><span className=\"mono-ui text-xs text-forest\">NO RESULTS FOR \"{query.toUpperCase()}\"</span></div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}