"use strict";(self.webpackChunknarvo_frontend=self.webpackChunknarvo_frontend||[]).push([[870],{5986(e,t,s){s.d(t,{I:()=>o});s(5043);var a=s(3216),r=s(579);const o=e=>{let{tag:t,className:s=""}=e;const o=(0,a.Zp)();return(0,r.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),o("/search?q=".concat(encodeURIComponent(t)))},className:"narvo-border px-1.5 py-1 mono-ui text-[10px] text-content hover:bg-primary hover:text-background-dark hover:border-primary cursor-pointer transition-colors ".concat(s),"data-testid":"hashtag-".concat(t.toLowerCase()),children:["#",t.toUpperCase()]})}},7302(e,t,s){s.d(t,{Ay:()=>c,Oi:()=>n,_N:()=>l,c$:()=>o,if:()=>i});s(5043);var a=s(579);const r=e=>{let{className:t="",variant:s="rect"}=e;const r="animate-pulse bg-forest/10";return"circle"===s?(0,a.jsx)("div",{className:"".concat(r," rounded-full ").concat(t)}):"text"===s?(0,a.jsx)("div",{className:"".concat(r," h-4 ").concat(t)}):(0,a.jsx)("div",{className:"".concat(r," ").concat(t)})},o=()=>(0,a.jsxs)("div",{className:"narvo-border bg-surface/30 flex flex-col md:flex-row min-h-[320px]",children:[(0,a.jsx)("div",{className:"md:w-1/2 bg-forest/5 min-h-[200px]"}),(0,a.jsxs)("div",{className:"flex-1 p-8 flex flex-col justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(r,{variant:"text",className:"w-40 h-3"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-8"}),(0,a.jsx)(r,{variant:"text",className:"w-3/4 h-8"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-4 mt-4"}),(0,a.jsx)(r,{variant:"text",className:"w-2/3 h-4"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(r,{className:"flex-1 h-12"}),(0,a.jsx)(r,{className:"w-12 h-12"}),(0,a.jsx)(r,{className:"w-12 h-12"})]})]})]}),n=()=>(0,a.jsxs)("div",{className:"p-6 narvo-border-b",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(r,{variant:"text",className:"w-24 h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-14 h-4"})]}),(0,a.jsx)(r,{variant:"text",className:"w-20 h-4"})]}),(0,a.jsx)(r,{variant:"text",className:"w-full h-6 mb-2"}),(0,a.jsx)(r,{variant:"text",className:"w-3/4 h-6 mb-3"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-2/3 h-4 mt-1"})]}),i=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r,{className:"w-20 h-6"}),(0,a.jsx)(r,{className:"w-20 h-6"})]}),(0,a.jsx)(r,{variant:"text",className:"w-full h-12"}),(0,a.jsx)(r,{variant:"text",className:"w-4/5 h-12"}),(0,a.jsxs)("div",{className:"border-l-2 border-forest/20 pl-6 space-y-2",children:[(0,a.jsx)(r,{variant:"text",className:"w-full h-5"}),(0,a.jsx)(r,{variant:"text",className:"w-3/4 h-5"})]}),(0,a.jsx)(r,{className:"w-full h-[400px]"}),(0,a.jsx)(r,{className:"w-full h-16"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(r,{variant:"text",className:"w-full h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-2/3 h-4"})]})]}),l=e=>{let{count:t=4}=e;return(0,a.jsx)("div",{className:"narvo-border bg-surface/20 divide-y divide-forest/10",children:Array.from({length:t}).map((e,t)=>(0,a.jsx)(n,{},t))})},c=r},526(e,t,s){s.d(t,{A:()=>d});var a=s(5043),r=s(6539),o=s(4336),n=s(8415),i=s(1245),l=s(579);const c={VERIFIED:{icon:n.o,color:"text-green-400",bg:"bg-green-400/10",border:"border-green-400/30",label:"VERIFIED"},DISPUTED:{icon:i.Q,color:"text-red-400",bg:"bg-red-400/10",border:"border-red-400/30",label:"DISPUTED"},UNVERIFIED:{icon:o.v,color:"text-yellow-400",bg:"bg-yellow-400/10",border:"border-yellow-400/30",label:"UNVERIFIED"},PENDING:{icon:r.N,color:"text-forest",bg:"bg-forest/10",border:"border-forest/30",label:"CHECKING..."}},d=e=>{let{storyId:t,compact:s=!1}=e;const[o,n]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{t?fetch("".concat("http://localhost:8000","/api/factcheck/story/").concat(t)).then(e=>e.ok?e.json():null).then(e=>{e&&n(e),d(!1)}).catch(()=>d(!1)):d(!1)},[t]),i)return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 mono-ui text-[9px] md:text-[10px] text-forest border border-forest/30 font-bold",children:[(0,l.jsx)(r.N,{className:"w-3 h-3 animate-spin"}),!s&&"VERIFYING..."]});const m=(null===o||void 0===o?void 0:o.status)||"UNVERIFIED",x=c[m]||c.UNVERIFIED,p=x.icon,h=(null===o||void 0===o?void 0:o.source)||"UNKNOWN",u=(null===o||void 0===o?void 0:o.confidence)||0;return s?(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 mono-ui text-[9px] font-bold ".concat(x.color," ").concat(x.bg," ").concat(x.border," border"),"data-testid":"truth-tag-".concat(t),title:"".concat(x.label," (").concat(u,"%) \u2014 ").concat(h),children:[(0,l.jsx)(p,{className:"w-3 h-3",weight:"PENDING"===m?"regular":"bold"}),x.label]}):(0,l.jsxs)("div",{className:"flex items-center gap-2 p-2 ".concat(x.bg," border ").concat(x.border),"data-testid":"truth-tag-".concat(t),children:[(0,l.jsx)(p,{className:"w-4 h-4 ".concat(x.color),weight:"PENDING"===m?"regular":"bold"}),(0,l.jsxs)("div",{className:"flex flex-col gap-0.5 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"mono-ui text-[11px] font-bold ".concat(x.color),children:x.label}),(0,l.jsxs)("span",{className:"mono-ui text-[9px] text-forest/60",children:[u,"%"]})]}),(0,l.jsx)("span",{className:"mono-ui text-[9px] text-forest truncate",children:h})]})]})}},8851(e,t,s){s.d(t,{T:()=>l});var a=s(9379),r=s(5043),o=s(4395);const n="http://localhost:8000",i="narvo_bookmarks",l=()=>{const{user:e}=(0,o.A)(),[t,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),d=()=>{try{return JSON.parse(localStorage.getItem(i)||"[]")}catch(e){return[]}},m=e=>{localStorage.setItem(i,JSON.stringify(e))},x=(0,r.useCallback)(async()=>{if(e){c(!0);try{const t=await fetch("".concat(n,"/api/bookmarks?user_id=").concat(e.id));if(t.ok){const e=await t.json();s(e),m(e)}else s(d())}catch(t){s(d())}c(!1)}else s(d())},[e]);(0,r.useEffect)(()=>{x()},[x]);return{bookmarks:t,loading:l,addBookmark:async r=>{const o={story_id:r.id,title:r.title,summary:r.summary||"",source:r.source||"",category:r.category||"General",source_url:r.source_url||"",saved_at:(new Date).toISOString()},i=[...t.filter(e=>e.story_id!==r.id),o];if(s(i),m(i),e)try{await fetch("".concat(n,"/api/bookmarks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,a.A)({user_id:e.id},o))})}catch(l){console.error("Failed to sync bookmark:",l)}},removeBookmark:async a=>{const r=t.filter(e=>e.story_id!==a);if(s(r),m(r),e)try{await fetch("".concat(n,"/api/bookmarks/").concat(a,"?user_id=").concat(e.id),{method:"DELETE"})}catch(o){console.error("Failed to remove bookmark:",o)}},isBookmarked:e=>t.some(t=>t.story_id===e),fetchBookmarks:x}}},9870(e,t,s){s.r(t),s.d(t,{default:()=>G});var a=s(9379),r=s(5043),o=s(3216),n=s(6930),i=s(4977),l=s(1111),c=s(7149),d=s(1353),m=s(1215),x=s(1872),p=s(344),h=s(866),u=s(2871),f=s(7945),g=s(3085),b=s(7968),v=s(3988),N=s(985),j=s(8851);const y=new Set,w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{threshold:s=80,disabled:a=!1}=t,[o,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(!1),m=(0,r.useRef)(0),x=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{if(a||c)return;const t=x.current;t&&t.scrollTop<=0&&(m.current=e.touches[0].clientY,n(!0))},[a,c]),h=(0,r.useCallback)(e=>{if(!o||a)return;const t=Math.max(0,e.touches[0].clientY-m.current),r=Math.min(.5*t,1.5*s);l(r)},[o,a,s]),u=(0,r.useCallback)(async()=>{if(o&&!a){if(n(!1),i>=s){d(!0);try{await e()}catch(t){}d(!1)}l(0)}},[o,i,s,e,a]);(0,r.useEffect)(()=>()=>{n(!1),l(0)},[]);const f=Math.min(i/s,1);return{containerRef:x,pulling:o&&i>10,refreshing:c,pullDistance:i,progress:f,handlers:{onTouchStart:p,onTouchMove:h,onTouchEnd:u}}};var k=s(5986),E=s(7302),S=s(526),A=s(1225);const _={politics:["https://images.unsplash.com/photo-1755756383827-95a69fbee439?w=600&h=400&fit=crop","https://images.unsplash.com/photo-1735886161697-b868f22f7dcd?w=600&h=400&fit=crop"],tech:["https://images.unsplash.com/photo-1528901166007-3784c7dd3653?w=600&h=400&fit=crop","https://images.unsplash.com/photo-1684337399050-0412ebed8005?w=600&h=400&fit=crop"],sports:["https://images.unsplash.com/photo-1694124087597-e27496da7e98?w=600&h=400&fit=crop","https://images.unsplash.com/photo-1706345832298-6d2be382a378?w=600&h=400&fit=crop"],finance:["https://images.unsplash.com/photo-1646924095921-ee83d7d69974?w=600&h=400&fit=crop","https://images.pexels.com/photos/534216/pexels-photo-534216.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop"],business:["https://images.unsplash.com/photo-1646924095921-ee83d7d69974?w=600&h=400&fit=crop","https://images.pexels.com/photos/7876445/pexels-photo-7876445.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop"],culture:["https://images.unsplash.com/photo-1764670085286-55cd79507a72?w=600&h=400&fit=crop","https://images.pexels.com/photos/18198595/pexels-photo-18198595.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop"],afrobeats:["https://images.unsplash.com/photo-1764670085286-55cd79507a72?w=600&h=400&fit=crop","https://images.unsplash.com/photo-1676156787191-c055f62e9771?w=600&h=400&fit=crop"],health:["https://images.pexels.com/photos/34185205/pexels-photo-34185205.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop","https://images.pexels.com/photos/5593681/pexels-photo-5593681.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop"],environment:["https://images.unsplash.com/photo-1647891684895-15c5b831fde1?w=600&h=400&fit=crop","https://images.unsplash.com/photo-1759252973882-d33c8a3b3b2e?w=600&h=400&fit=crop"],education:["https://images.unsplash.com/photo-1528901166007-3784c7dd3653?w=600&h=400&fit=crop","https://images.pexels.com/photos/9432947/pexels-photo-9432947.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop"],general:["https://images.unsplash.com/photo-1647891684895-15c5b831fde1?w=600&h=400&fit=crop","https://images.unsplash.com/photo-1646924095921-ee83d7d69974?w=600&h=400&fit=crop"]},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=(e||"general").toLowerCase().replace(/[#\s]/g,""),a=Object.keys(_).find(e=>s.includes(e))||"general",r=_[a];return r[(e=>{let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t|=0;return Math.abs(t)})(t||s)%r.length]},O=e=>{const t={politics:"from-red-900/60 to-red-950/80",tech:"from-cyan-900/60 to-cyan-950/80",sports:"from-green-900/60 to-green-950/80",finance:"from-amber-900/60 to-amber-950/80",business:"from-amber-900/60 to-amber-950/80",culture:"from-purple-900/60 to-purple-950/80",afrobeats:"from-pink-900/60 to-pink-950/80",health:"from-teal-900/60 to-teal-950/80",environment:"from-emerald-900/60 to-emerald-950/80",education:"from-blue-900/60 to-blue-950/80",general:"from-forest/60 to-background-dark/80"},s=(e||"general").toLowerCase().replace(/[#\s]/g,"");return t[Object.keys(t).find(e=>s.includes(e))||"general"]};var I=s(4395),R=s(579);const D="http://localhost:8000",T={hidden:{},show:{transition:{staggerChildren:.08}}},L={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.4,ease:[.25,.1,.25,1]}}},G=()=>{var e,t,s,_;const G=(0,o.Zp)(),{t:P}=(0,n.Bd)(),[F,H]=(0,r.useState)([]),[U,M]=(0,r.useState)(!0),[K,B]=(0,r.useState)(null),[V,Y]=(0,r.useState)(10),[q,J]=(0,r.useState)(!1),[Q,W]=(0,r.useState)(!1),[X,Z]=(0,r.useState)("all"),[,$]=(0,r.useState)(null),{playTrack:z,addToQueue:ee}=(0,v.n)(),{getTotalSources:te,getLocalSources:se,getInternationalSources:ae,getContinentalSources:re,getSourcesByRegion:oe,getHealthForSource:ne,getHealthSummary:ie,refreshHealth:le}=(0,N.do)(),{isBookmarked:ce,addBookmark:de,removeBookmark:me}=(0,j.T)(),{showAlert:xe}=(0,A.nA)(),{user:pe}=(0,I.A)(),[he,ue]=(0,r.useState)("latest"),[fe,ge]=(0,r.useState)([]),[be,ve]=(0,r.useState)([]),[Ne,je]=(0,r.useState)(null),[,ye]=(0,r.useState)(!1);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nova",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const a=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!e.length)return;const r=e.filter(e=>!y.has(e.id)).slice(0,s);if(!r.length)return;const o=new AbortController;return a.current=o,(async()=>{for(const s of r){if(o.signal.aborted)break;try{if(await new Promise(e=>{"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:5e3}):setTimeout(e,2e3)}),o.signal.aborted)break;const e=(s.narrative||s.summary||s.title||"").slice(0,500);if(!e)continue;await fetch("".concat("http://localhost:8000","/api/tts/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,voice_id:t,language:"en"}),signal:o.signal}),y.add(s.id)}catch(e){}}})(),()=>{o.abort()}},[e,t,s])}(F.slice(0,3),"nova",3);const[we,ke]=(0,r.useState)(!1),Ee=r.useCallback(async()=>{var e;const t=await fetch("".concat(D,"/api/settings/guest")).then(e=>e.json()),s=!1!==t.aggregator_mediastack,a=!1!==t.aggregator_newsdata;$({mediastack:s,newsdata:a}),null!==(e=t.interests)&&void 0!==e&&e.length&&ge(t.interests);const r=[s&&"mediastack",a&&"newsdata"].filter(Boolean).join(","),o=r?"&aggregator_sources=".concat(r):"",[n,i]=await Promise.all([fetch("".concat(D,"/api/news?limit=50&include_aggregators=true").concat(o)).then(e=>e.json()),fetch("".concat(D,"/api/metrics")).then(e=>e.json()).catch(()=>null)]),l=new Map,c=[];for(const d of n){const e=(d.title||"").toLowerCase().trim().slice(0,60);if(!e){c.push(d);continue}const t=l.get(e);if(t){if(d.aggregator&&!t.aggregator);else if(!d.aggregator&&t.aggregator){const s=c.indexOf(t);-1!==s&&(c[s]=d),l.set(e,d)}}else l.set(e,d),c.push(d)}H(c),B(i),c.length<=10&&W(!0)},[]);(0,r.useEffect)(()=>{Ee().catch(()=>{}).finally(()=>M(!1))},[Ee]),(0,r.useEffect)(()=>{const e=(null===pe||void 0===pe?void 0:pe.id)||"guest";ye(!0),fetch("".concat(D,"/api/recommendations/").concat(e,"?limit=6")).then(e=>e.json()).then(e=>{ve(e.recommendations||[]),je(e.profile_summary||null)}).catch(()=>{}).finally(()=>ye(!1))},[null===pe||void 0===pe?void 0:pe.id]);const{containerRef:Se,pulling:Ae,refreshing:_e,pullDistance:Ce,handlers:Oe}=w(Ee,{threshold:70}),Ie=F[0],Re=F.slice(1).filter(e=>"rss"===X?!e.aggregator:"aggregators"!==X||!!e.aggregator).sort((e,t)=>{if(fe.length>0){const s=(e.category||"").toLowerCase(),a=(t.category||"").toLowerCase(),r=fe.includes(s)?1:0,o=fe.includes(a)?1:0;if(r!==o)return o-r}return"oldest"===he?new Date(e.published||0)-new Date(t.published||0):new Date(t.published||0)-new Date(e.published||0)}),De=Re.slice(0,V),Te=(e,t)=>{e.stopPropagation(),ce(t.id)?(me(t.id),xe("BOOKMARK_REMOVED")):(de(t),xe("BOOKMARK_ADDED"))},Le=async(e,t)=>{e.stopPropagation();const s="".concat(window.location.origin,"/news/").concat(t.id),a="".concat(t.title," - Listen on NARVO");if(navigator.share)try{await navigator.share({title:t.title,text:a,url:s}),xe({type:"success",title:"SHARED_SUCCESS",message:"Story shared successfully.",code:"SHARE_OK"})}catch(r){"AbortError"!==r.name&&(await navigator.clipboard.writeText(s),xe({type:"sync",title:"LINK_COPIED",message:"Story link copied to clipboard.",code:"CLIP_OK"}))}else await navigator.clipboard.writeText(s),xe({type:"sync",title:"LINK_COPIED",message:"Story link copied to clipboard.",code:"CLIP_OK"})},Ge=async(e,t)=>{e.stopPropagation();const s=await(async t=>{try{return await fetch("".concat(D,"/api/offline/save"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story_id:t.id,title:t.title,summary:t.summary||"",narrative:t.narrative||"",source:t.source||"",category:t.category||"General",image_url:t.image_url||null})}),!0}catch(e){return console.error("Error saving for offline:",e),!1}})(t);var a;s?xe({type:"success",title:"SAVED_OFFLINE",message:'"'.concat(null===(a=t.title)||void 0===a?void 0:a.slice(0,30),'..." saved for offline reading.'),code:"OFFLINE_OK"}):xe({type:"warning",title:"SAVE_FAILED",message:"Could not save article for offline.",code:"OFFLINE_ERR"})},Pe=e=>{const t=["1HR_AGO","2HR_AGO","3HR_AGO","4HR_AGO","6HR_AGO","8HR_AGO","12HR_AGO"];return t[e%t.length]};return(0,R.jsxs)("div",{className:"flex-1 flex min-h-0 min-w-0 overflow-hidden",children:[(0,R.jsxs)("main",{className:"flex-1 flex flex-col bg-background-dark min-w-0 min-h-0 overflow-hidden",children:[(0,R.jsxs)("div",{className:"h-10 md:h-14 flex items-center justify-between px-2 md:px-8 bg-surface/30 narvo-border-b shrink-0 overflow-hidden",children:[(0,R.jsxs)("div",{className:"flex items-center gap-1 md:gap-3 min-w-0",children:[(0,R.jsx)("span",{className:"mono-ui text-[9px] md:text-xs text-primary font-bold shrink-0 hidden xs:inline",children:"LGS_01"}),(0,R.jsx)("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-primary animate-pulse shrink-0"})]}),(0,R.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 shrink-0 ml-auto",children:[(0,R.jsx)("div",{className:"flex items-center border border-forest/30 p-0.5","data-testid":"source-filter-toggle",children:["all","rss","aggregators"].map(e=>(0,R.jsx)("button",{onClick:()=>Z(e),className:"px-1.5 md:px-2.5 py-0.5 md:py-1 mono-ui text-[9px] md:text-[11px] font-bold transition-colors ".concat(X===e?"bg-primary text-background-dark":"text-forest hover:text-content"),"data-testid":"filter-".concat(e),children:"all"===e?"ALL":"rss"===e?"RSS":"AGG"},e))}),(0,R.jsx)("button",{onClick:()=>ue(e=>"latest"===e?"oldest":"latest"),className:"mono-ui text-[10px] md:text-[11px] text-primary border border-primary px-1.5 md:px-2.5 py-0.5 md:py-1 hover:bg-primary hover:text-background-dark transition-colors font-bold","data-testid":"sort-btn",children:"latest"===he?"NEW":"OLD"})]})]}),(0,R.jsxs)("div",{className:"xl:hidden overflow-hidden",children:[(0,R.jsxs)("button",{onClick:()=>ke(e=>!e),className:"w-full h-9 flex items-center justify-between px-4 bg-surface/20 narvo-border-b","data-testid":"telemetry-toggle",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)(l.C,{weight:"fill",className:"w-3 h-3 text-primary"}),(0,R.jsx)("span",{className:"mono-ui text-[10px] text-forest font-bold tracking-widest",children:"TELEMETRY"}),(0,R.jsxs)("span",{className:"mono-ui text-[9px] text-primary font-bold",children:[te()," FEEDS"]})]}),(0,R.jsx)("span",{className:"mono-ui text-[10px] text-forest transition-transform ".concat(we?"rotate-90":""),children:"\u25b6"})]}),we&&(0,R.jsxs)("div",{className:"bg-surface/10 narvo-border-b px-4 py-3 space-y-3 max-h-60 overflow-y-auto custom-scroll",children:[(0,R.jsx)("div",{className:"flex flex-wrap gap-1",children:["#ECONOMY","#SOLAR_GRID","#AI_SYNTH","#ENERGY","#TECH"].map(e=>(0,R.jsx)("span",{className:"narvo-border px-1.5 py-0.5 mono-ui text-[9px] text-content",children:e},e))}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,R.jsx)("span",{className:"mono-ui text-[10px] text-forest font-bold",children:"SOURCE_MATRIX"}),(0,R.jsxs)("span",{className:"mono-ui text-[9px] text-primary font-bold",children:[te()," FEEDS"]})]}),(()=>{const e=ie(),t=(null===e||void 0===e?void 0:e.total)||te()||1,s=(null===e||void 0===e?void 0:e.green)||0,a=(null===e||void 0===e?void 0:e.amber)||0,r=(null===e||void 0===e?void 0:e.red)||0;return(0,R.jsxs)("div",{className:"flex h-1.5 w-full gap-px mb-1",children:[s>0&&(0,R.jsx)("div",{className:"bg-emerald-500",style:{width:"".concat(s/t*100,"%")}}),a>0&&(0,R.jsx)("div",{className:"bg-amber-500",style:{width:"".concat(a/t*100,"%")}}),r>0&&(0,R.jsx)("div",{className:"bg-red-500",style:{width:"".concat(r/t*100,"%")}})]})})(),(0,R.jsxs)("div",{className:"flex items-center gap-3 mono-ui text-[9px]",children:[(0,R.jsxs)("span",{className:"text-forest",children:["LOCAL: ",se()]}),(0,R.jsxs)("span",{className:"text-forest",children:["CONTINENTAL: ",re()]}),(0,R.jsxs)("span",{className:"text-forest",children:["INTL: ",ae()]})]})]}),K&&(0,R.jsxs)("div",{className:"flex items-center gap-3 mono-ui text-[9px] text-forest",children:[(0,R.jsxs)("span",{children:["ARTICLES: ",(0,R.jsx)("span",{className:"text-primary",children:K.totalArticles||0})]}),(0,R.jsxs)("span",{children:["RSS: ",(0,R.jsx)("span",{className:"text-primary",children:K.rssFeeds||0})]}),(0,R.jsxs)("span",{children:["PODCASTS: ",(0,R.jsx)("span",{className:"text-primary",children:K.totalPodcasts||0})]})]})]})]}),(0,R.jsxs)("div",(0,a.A)((0,a.A)({ref:Se,className:"flex-1 overflow-y-auto overflow-x-hidden custom-scroll p-4 md:p-8 pb-32 md:pb-8 relative","data-testid":"news-feed"},Oe),{},{children:[(Ae||_e)&&(0,R.jsxs)("div",{className:"md:hidden flex items-center justify-center py-3 transition-all",style:{height:Ae?Ce:_e?40:0,overflow:"hidden"},children:[(0,R.jsx)("div",{className:"w-5 h-5 border-2 border-[rgb(var(--color-primary))] border-t-transparent ".concat(_e?"animate-spin":""),style:{transform:Ae?"rotate(".concat(3*Ce,"deg)"):void 0,borderRadius:"50%"}}),(0,R.jsx)("span",{className:"ml-2 font-mono text-[11px] text-[rgb(var(--color-primary))]",children:_e?"REFRESHING...":"PULL TO REFRESH"})]}),(0,R.jsx)("div",{className:"max-w-4xl mx-auto flex flex-col gap-8 md:gap-12",children:U?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"h-3 w-32 bg-forest/10 animate-pulse mb-4"}),(0,R.jsx)(E.c$,{})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"h-3 w-40 bg-forest/10 animate-pulse mb-4"}),(0,R.jsx)("div",{className:"narvo-border bg-surface/20 divide-y divide-forest/10",children:Array.from({length:5}).map((e,t)=>(0,R.jsx)(E.Oi,{},t))})]})]}):(0,R.jsxs)(R.Fragment,{children:[Ie&&(0,R.jsxs)(i.P.section,{variants:L,initial:"hidden",animate:"show",children:[(0,R.jsxs)("span",{className:"mono-ui text-[12px] md:text-xs text-primary block mb-4 font-bold tracking-[0.2em]",children:["//"," ",P("dashboard.featured_transmission")]}),(0,R.jsxs)("article",{className:"narvo-border bg-surface/50 group relative overflow-hidden flex flex-col md:flex-row min-h-[280px] md:min-h-[320px] cursor-pointer",onClick:()=>G("/news/".concat(Ie.id)),"data-testid":"featured-card",children:[(0,R.jsx)("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary opacity-0 group-hover:opacity-100 transition-opacity"}),(0,R.jsxs)("div",{className:"md:w-1/2 relative bg-background-dark overflow-hidden min-h-[180px] md:min-h-[200px]",children:[(0,R.jsx)("img",{alt:Ie.title,className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700 grayscale hover:grayscale-0 absolute inset-0",src:Ie.image_url||C(Ie.category||(null===(e=Ie.tags)||void 0===e?void 0:e[0]),Ie.id)}),(0,R.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-background-dark/80 to-transparent"}),(0,R.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[(0,R.jsx)("span",{className:"bg-primary text-background-dark font-mono text-[11px] md:text-[12px] font-bold px-2 py-0.5 uppercase",children:"Feature"}),(0,R.jsx)(S.A,{storyId:Ie.id,compact:!0})]})]}),(0,R.jsxs)("div",{className:"flex-1 p-4 md:p-8 flex flex-col justify-between overflow-hidden",children:[(0,R.jsxs)("div",{children:[(0,R.jsxs)("span",{className:"mono-ui text-[12px] md:text-xs text-forest block mb-2 font-bold tracking-widest",children:["NARRATIVE_NODE ","//"," ",null===(t=Ie.category)||void 0===t?void 0:t.toUpperCase()]}),(0,R.jsx)("h2",{className:"font-display text-xl md:text-3xl font-bold uppercase tracking-tight text-content mb-2 md:mb-4 leading-none group-hover:text-primary transition-colors line-clamp-3",children:Ie.title}),(0,R.jsx)("p",{className:"text-sm md:text-base text-forest font-mono leading-relaxed mb-4 md:mb-6 opacity-80 line-clamp-3",children:Ie.summary})]}),(0,R.jsxs)("div",{className:"flex gap-3 md:gap-4",children:[(0,R.jsxs)("button",{onClick:e=>{e.stopPropagation(),z(Ie)},className:"flex-1 h-11 md:h-12 bg-primary text-background-dark font-display font-bold text-sm md:text-base uppercase flex items-center justify-center gap-2 md:gap-3 hover:bg-white transition-all","data-testid":"featured-play-btn",children:[(0,R.jsx)(c.N,{weight:"fill",className:"w-5 h-5 md:w-6 md:h-6"}),(0,R.jsx)("span",{children:P("dashboard.listen_now")})]}),(0,R.jsx)("button",{className:"w-11 h-11 md:w-12 md:h-12 narvo-border flex items-center justify-center text-primary",title:"Translate",onClick:e=>e.stopPropagation(),children:(0,R.jsx)(d.H,{weight:"bold",className:"w-5 h-5"})}),(0,R.jsx)("button",{className:"w-11 h-11 md:w-12 md:h-12 narvo-border flex items-center justify-center text-forest hover:text-primary transition-colors",onClick:e=>Ge(e,Ie),title:"Save for Offline","data-testid":"featured-offline-btn",children:(0,R.jsx)(m.p,{weight:"bold",className:"w-5 h-5"})}),(0,R.jsx)("button",{className:"w-11 h-11 md:w-12 md:h-12 narvo-border flex items-center justify-center text-forest hover:text-primary transition-colors",onClick:e=>Le(e,Ie),title:"Share","data-testid":"featured-share-btn",children:(0,R.jsx)(x.s,{weight:"bold",className:"w-5 h-5"})}),(0,R.jsx)("button",{className:"w-11 h-11 md:w-12 md:h-12 narvo-border flex items-center justify-center transition-colors ".concat(ce(Ie.id)?"text-primary border-primary":"text-forest hover:text-primary"),onClick:e=>Te(e,Ie),"data-testid":"featured-bookmark-btn",children:(0,R.jsx)(p.D,{weight:ce(Ie.id)?"fill":"regular",className:"w-5 h-5"})})]})]})]})]}),be.length>0&&(0,R.jsxs)(i.P.section,{variants:T,initial:"hidden",animate:"show","data-testid":"recommendations-section",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between border-b border-primary/30 pb-2 mb-3 gap-2",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 min-w-0 shrink",children:[(0,R.jsx)(h.l,{weight:"fill",className:"w-3.5 h-3.5 text-primary shrink-0"}),(0,R.jsxs)("span",{className:"mono-ui text-[11px] md:text-xs text-primary font-bold tracking-[0.15em] shrink-0",children:["//"," FOR_YOU"]})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[Ne&&(0,R.jsxs)("span",{className:"mono-ui text-[9px] md:text-[10px] text-forest/50 uppercase hidden sm:inline",children:[Ne.history_count," listens"]}),(0,R.jsxs)("button",{onClick:e=>{e.stopPropagation(),be.slice(0,5).forEach((e,t)=>{setTimeout(()=>ee(e),100*t)}),xe({type:"success",title:"PLAYLIST_QUEUED",message:"".concat(Math.min(5,be.length)," recommendations added to queue."),code:"PL_OK",duration:3e3})},className:"flex items-center gap-1 px-2 py-1 bg-primary text-background-dark mono-ui text-[9px] md:text-[11px] font-bold hover:bg-white transition-colors whitespace-nowrap","data-testid":"play-all-recommendations",children:[(0,R.jsx)(c.N,{weight:"fill",className:"w-3 h-3"}),"PLAY_ALL"]})]})]}),(null===Ne||void 0===Ne||null===(s=Ne.top_categories)||void 0===s?void 0:s.length)>0&&(0,R.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[Ne.top_categories.map(e=>(0,R.jsx)("span",{className:"bg-primary/10 text-primary mono-ui text-[9px] px-1.5 py-0.5 border border-primary/20 uppercase",children:e},e)),null===(_=Ne.expanded_topics)||void 0===_?void 0:_.slice(0,3).map(e=>(0,R.jsx)("span",{className:"bg-forest/10 text-forest mono-ui text-[9px] px-1.5 py-0.5 border border-forest/20",children:e},e))]}),(0,R.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-3 gap-2 md:gap-3",children:be.slice(0,6).map(e=>{var t;return(0,R.jsxs)(i.P.article,{variants:L,className:"narvo-border bg-surface/30 group cursor-pointer hover:bg-surface/50 hover:border-primary/30 transition-all overflow-hidden",onClick:()=>G("/news/".concat(e.id)),"data-testid":"reco-card-".concat(e.id),children:[(0,R.jsxs)("div",{className:"h-20 md:h-24 relative overflow-hidden",children:[(0,R.jsx)("img",{src:e.image_url||C(e.category||(null===(t=e.tags)||void 0===t?void 0:t[0]),e.id),alt:e.category,className:"w-full h-full object-cover opacity-40 group-hover:opacity-70 grayscale group-hover:grayscale-0 transition-all duration-500"}),(0,R.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark/90 to-transparent"}),(0,R.jsx)("div",{className:"absolute top-1.5 left-1.5",children:(0,R.jsx)("span",{className:"bg-primary/90 text-background-dark mono-ui text-[8px] md:text-[9px] font-bold px-1 py-0.5 uppercase",children:e.category||"General"})}),(0,R.jsx)("div",{className:"absolute bottom-1.5 right-1.5",children:(0,R.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e)},className:"w-7 h-7 bg-primary/90 flex items-center justify-center hover:bg-primary transition-colors","data-testid":"reco-play-".concat(e.id),children:(0,R.jsx)(c.N,{weight:"fill",className:"w-3.5 h-3.5 text-background-dark"})})})]}),(0,R.jsxs)("div",{className:"p-2 md:p-2.5",children:[(0,R.jsx)("h4",{className:"font-display text-[11px] md:text-xs font-bold text-content uppercase tracking-tight leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),(0,R.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,R.jsx)("span",{className:"mono-ui text-[8px] md:text-[9px] text-forest truncate",children:e.source}),e.recommendation_score>0&&(0,R.jsxs)("span",{className:"mono-ui text-[8px] text-primary/60 font-bold shrink-0 ml-1",children:[Math.round(e.recommendation_score),"%"]})]})]})]},e.id)})})]}),(0,R.jsxs)(i.P.section,{className:"space-y-4 md:space-y-6",variants:T,initial:"hidden",animate:"show",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between border-b border-forest/30 pb-2",children:[(0,R.jsxs)("span",{className:"mono-ui text-[12px] md:text-xs text-forest font-bold tracking-[0.2em]",children:["//"," ",P("dashboard.synthesized_streams")]}),(0,R.jsxs)("span",{className:"mono-ui text-[11px] md:text-[12px] text-forest/50 uppercase",children:["Nodes: ",String(De.length).padStart(2,"0")]})]}),(0,R.jsx)(i.P.div,{variants:L,className:"narvo-border bg-surface/20 divide-y divide-forest/10",children:De.map((e,t)=>{var s,a,r,o,n;return(0,R.jsxs)(i.P.article,{variants:L,className:"p-4 md:p-6 group hover:bg-surface/40 transition-colors cursor-pointer flex gap-4",onClick:()=>G("/news/".concat(e.id)),"data-testid":"stream-card-".concat(e.id),children:[(0,R.jsxs)("div",{className:"hidden sm:block w-20 h-20 md:w-24 md:h-24 shrink-0 narvo-border overflow-hidden relative",children:[(0,R.jsx)("img",{src:e.image_url||C(e.category||(null===(s=e.tags)||void 0===s?void 0:s[0]),e.id),alt:e.category,className:"w-full h-full object-cover opacity-50 group-hover:opacity-80 grayscale group-hover:grayscale-0 transition-all duration-500"}),(0,R.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t ".concat(O(e.category||(null===(a=e.tags)||void 0===a?void 0:a[0]))," mix-blend-multiply")})]}),(0,R.jsxs)("div",{className:"flex-1 flex flex-col gap-2 md:gap-3 min-w-0",children:[(0,R.jsxs)("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,R.jsxs)("span",{className:"bg-forest/20 text-primary mono-ui text-[11px] md:text-[12px] px-1.5 md:px-2 py-0.5 border border-forest/30",children:["SOURCE:",null===(r=e.source)||void 0===r?void 0:r.toUpperCase().replace(/\s/g,"_").slice(0,15)]}),e.aggregator&&(0,R.jsx)("span",{className:"bg-primary/10 text-primary mono-ui text-[10px] px-1.5 py-0.5 border border-primary/30","data-testid":"aggregator-badge-".concat(e.id),children:"mediastack"===e.aggregator?"MEDIASTACK":"NEWSDATA"}),(0,R.jsx)("span",{className:"mono-ui text-[11px] md:text-[12px] text-forest/50",children:Pe(t)}),(0,R.jsx)(S.A,{storyId:e.id,compact:!0})]}),(0,R.jsxs)("div",{className:"flex gap-1.5 md:gap-2",children:[!(null!==(o=e.tags)&&void 0!==o&&o.length)&&(0,R.jsx)(k.I,{tag:e.category||"GENERAL",className:"text-[10px] md:text-[11px] border-forest/20 px-1 md:px-1.5"}),null===(n=e.tags)||void 0===n?void 0:n.slice(0,2).map((e,t)=>(0,R.jsx)(k.I,{tag:e,className:"text-[10px] md:text-[11px] border-forest/20 px-1 md:px-1.5"},t))]})]}),(0,R.jsx)("h3",{className:"font-display text-lg md:text-xl font-bold uppercase tracking-tight text-content group-hover:text-primary transition-colors leading-tight",children:e.title}),(0,R.jsx)("p",{className:"text-sm md:text-base text-forest font-mono leading-relaxed opacity-70 line-clamp-2",children:e.summary}),(0,R.jsxs)("div",{className:"flex items-center gap-4 md:gap-6 pt-1",children:[(0,R.jsxs)("button",{onClick:t=>{t.stopPropagation(),z(e)},className:"mono-ui text-[12px] md:text-xs text-primary flex items-center gap-2 hover:text-content transition-colors","data-testid":"play-btn-".concat(e.id),children:[(0,R.jsx)(u.S9,{weight:"bold",className:"w-4 h-4 text-forest"}),(0,R.jsx)("span",{children:"GENERATE_AUDIO"})]}),(0,R.jsx)("div",{className:"flex-1 h-[1px] bg-forest/10"}),(0,R.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),ee(e),xe({type:"sync",title:"QUEUE_UPDATED",message:"Added to queue: ".concat(null===(s=e.title)||void 0===s?void 0:s.slice(0,40),"..."),code:"Q_ADD",duration:2e3})},className:"text-forest hover:text-primary transition-colors",title:"Add to Queue","data-testid":"queue-btn-".concat(e.id),children:(0,R.jsx)(f.o,{weight:"bold",className:"w-4 h-4"})}),(0,R.jsx)("button",{onClick:t=>Ge(t,e),className:"text-forest hover:text-primary transition-colors",title:"Save for Offline","data-testid":"offline-btn-".concat(e.id),children:(0,R.jsx)(m.p,{weight:"bold",className:"w-4 h-4"})}),(0,R.jsx)("button",{onClick:t=>Le(t,e),className:"text-forest hover:text-primary transition-colors",title:"Share","data-testid":"share-btn-".concat(e.id),children:(0,R.jsx)(x.s,{weight:"bold",className:"w-4 h-4"})}),(0,R.jsx)("button",{onClick:t=>Te(t,e),className:"transition-colors ".concat(ce(e.id)?"text-primary":"text-forest hover:text-primary"),"data-testid":"bookmark-btn-".concat(e.id),children:(0,R.jsx)(p.D,{weight:ce(e.id)?"fill":"regular",className:"w-4 h-4"})})]})]})]},e.id)})}),!Q&&(0,R.jsxs)("button",{onClick:()=>{J(!0),setTimeout(()=>{const e=V+10;Y(e),e+1>=F.length&&W(!0),J(!1)},400)},disabled:q,className:"w-full h-11 md:h-12 narvo-border bg-surface/10 mono-ui text-[12px] md:text-xs text-forest hover:bg-surface hover:text-primary transition-all flex items-center justify-center gap-3 disabled:opacity-50","data-testid":"load-more-btn",children:[q?(0,R.jsx)("div",{className:"w-4 h-4 border-2 border-forest border-t-transparent animate-spin"}):(0,R.jsx)(g.y,{weight:"bold",className:"w-4 h-4"}),(0,R.jsx)("span",{children:q?"LOADING...":"LOAD_MORE // ".concat(Math.max(0,Re.length-V)," REMAINING")})]})]})]})})]}))]}),(0,R.jsxs)("aside",{className:"w-72 xl:w-80 hidden xl:flex flex-col narvo-border-l bg-background-dark shrink-0","data-testid":"telemetry-sidebar",children:[(0,R.jsx)("div",{className:"h-16 flex items-center px-5 narvo-border-b bg-surface/10",children:(0,R.jsxs)("span",{className:"mono-ui text-xs font-bold text-forest tracking-widest uppercase flex items-center gap-3",children:[(0,R.jsx)(u.S9,{weight:"bold",className:"text-primary w-4 h-4"})," ",P("dashboard.telemetry")]})}),(0,R.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-6 custom-scroll",children:[(0,R.jsxs)("div",{className:"narvo-border bg-surface/20 p-4 relative overflow-hidden",children:[(0,R.jsx)("div",{className:"absolute top-0 right-0 p-2 opacity-20",children:(0,R.jsx)(b.S,{weight:"fill",className:"w-8 h-8"})}),(0,R.jsx)("span",{className:"mono-ui text-[12px] text-forest block mb-3 font-bold tracking-widest",children:"REGIONAL_ENV"}),(0,R.jsxs)("div",{className:"flex items-end justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("span",{className:"font-display text-3xl font-bold text-content tracking-tighter",children:"28\xb0C"}),(0,R.jsx)("span",{className:"mono-ui text-[12px] text-forest block mt-1",children:"LAGOS, NIGERIA"})]}),(0,R.jsxs)("div",{className:"text-right",children:[(0,R.jsx)("span",{className:"mono-ui text-[12px] text-primary font-bold",children:"HUM: 62%"}),(0,R.jsx)("span",{className:"mono-ui text-[12px] text-forest block",children:"WIND: 12km/h"})]})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("span",{className:"mono-ui text-[12px] text-forest block mb-3 font-bold tracking-widest",children:P("dashboard.trending")}),(0,R.jsx)("div",{className:"flex flex-wrap gap-1.5",children:["#ECONOMY","#SOLAR_GRID","#AI_SYNTH","#ENERGY","#TECH"].map(e=>(0,R.jsx)("span",{className:"narvo-border px-2 py-1 mono-ui text-[11px] text-content hover:bg-forest hover:text-background-dark cursor-pointer transition-colors",children:e},e))})]}),(0,R.jsxs)("div",{className:"narvo-border bg-surface/20 p-4 relative overflow-hidden","data-testid":"source-breakdown-widget",children:[(0,R.jsx)("div",{className:"absolute top-0 right-0 p-2 opacity-20",children:(0,R.jsx)(l.C,{weight:"fill",className:"w-8 h-8"})}),(0,R.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,R.jsx)("span",{className:"mono-ui text-[12px] text-forest font-bold tracking-widest",children:"SOURCE_MATRIX"}),(0,R.jsxs)("span",{className:"mono-ui text-[11px] text-primary font-bold",children:[te()," FEEDS"]})]}),(()=>{const e=ie(),t=(null===e||void 0===e?void 0:e.total)||te()||1,s=(null===e||void 0===e?void 0:e.green)||0,a=(null===e||void 0===e?void 0:e.amber)||0,r=(null===e||void 0===e?void 0:e.red)||0,o=t-s-a-r;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"flex h-1.5 w-full mb-1 gap-px","data-testid":"health-bar",children:[s>0&&(0,R.jsx)("div",{className:"bg-emerald-500 transition-all",style:{width:"".concat(s/t*100,"%")}}),a>0&&(0,R.jsx)("div",{className:"bg-amber-500 transition-all",style:{width:"".concat(a/t*100,"%")}}),r>0&&(0,R.jsx)("div",{className:"bg-red-500 transition-all",style:{width:"".concat(r/t*100,"%")}}),o>0&&(0,R.jsx)("div",{className:"bg-forest/30 transition-all",style:{width:"".concat(o/t*100,"%")}})]}),(0,R.jsxs)("div",{className:"flex items-center gap-3 mb-3 mono-ui text-[10px]",children:[(0,R.jsxs)("span",{className:"flex items-center gap-1 text-emerald-500",children:[(0,R.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 inline-block"}),s]}),(0,R.jsxs)("span",{className:"flex items-center gap-1 text-amber-500",children:[(0,R.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 inline-block"}),a]}),(0,R.jsxs)("span",{className:"flex items-center gap-1 text-red-500",children:[(0,R.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 inline-block"}),r]}),o>0&&(0,R.jsxs)("span",{className:"flex items-center gap-1 text-forest/50",children:[(0,R.jsx)("span",{className:"w-1.5 h-1.5 bg-forest/30 inline-block"}),o]})]})]})})(),[{key:"local",label:"LOCAL_NG",count:se()},{key:"continental",label:"CONTINENTAL_AF",count:re()},{key:"international",label:"INTERNATIONAL",count:ae()}].map(e=>{const t=oe(e.key),s=t.reduce((e,t)=>{const s=ne(t.name),a=(null===s||void 0===s?void 0:s.status)||"unknown";return e[a]=(e[a]||0)+1,e},{});return(0,R.jsxs)("details",{className:"group mb-2","data-testid":"source-region-".concat(e.key),children:[(0,R.jsxs)("summary",{className:"flex items-center justify-between cursor-pointer py-1.5 list-none",children:[(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)("span",{className:"w-2 h-2 ".concat(s.red?"bg-red-500":s.amber?"bg-amber-500":"bg-emerald-500"," animate-pulse")}),(0,R.jsx)("span",{className:"mono-ui text-[12px] text-content font-bold",children:e.label})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[(0,R.jsx)("span",{className:"mono-ui text-[12px] font-bold text-forest",children:e.count}),(0,R.jsx)("span",{className:"mono-ui text-[10px] text-forest group-open:rotate-90 transition-transform",children:"\u25b6"})]})]}),(0,R.jsx)("div",{className:"pl-4 pt-1 pb-1 space-y-0.5",children:t.map((e,t)=>{const s=ne(e.name),a="green"===(null===s||void 0===s?void 0:s.status)?"bg-emerald-500":"amber"===(null===s||void 0===s?void 0:s.status)?"bg-amber-500":"red"===(null===s||void 0===s?void 0:s.status)?"bg-red-500":"bg-forest/30",r=(null===s||void 0===s?void 0:s.latency_ms)>0?"".concat(s.latency_ms,"ms"):"";return(0,R.jsxs)("div",{className:"flex items-center gap-1.5 mono-ui text-[10px] text-forest/80","data-testid":"source-health-".concat(e.name.replace(/\s/g,"-").toLowerCase()),children:[(0,R.jsx)("span",{className:"w-1.5 h-1.5 shrink-0 ".concat(a)}),(0,R.jsx)("span",{className:"truncate",children:e.name}),r&&(0,R.jsx)("span",{className:"ml-auto text-forest/40 shrink-0",children:r})]},t)})})]},e.key)}),(0,R.jsxs)("div",{className:"mt-2 pt-2 border-t border-forest/20","data-testid":"aggregator-counts",children:[(0,R.jsx)("span",{className:"mono-ui text-[11px] text-forest font-bold tracking-widest block mb-1.5",children:"AGGREGATOR_APIs"}),[{name:"Mediastack",key:"mediastack"},{name:"NewsData.io",key:"newsdata"}].map(e=>{var t;const s=null===K||void 0===K||null===(t=K.aggregators)||void 0===t?void 0:t[e.key],a=null===s||void 0===s?void 0:s.configured,r=(null===s||void 0===s?void 0:s.cached_count)||0;return(0,R.jsxs)("div",{className:"flex items-center justify-between py-0.5 mono-ui text-[10px]","data-testid":"aggregator-".concat(e.key),children:[(0,R.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,R.jsx)("span",{className:"w-1.5 h-1.5 ".concat(a?"bg-emerald-500 animate-pulse":"bg-red-500")}),(0,R.jsx)("span",{className:"text-forest/80",children:e.name})]}),(0,R.jsx)("span",{className:"font-bold ".concat(r>0?"text-primary":"text-forest/40"),children:r>0?"".concat(r," articles"):a?"READY":"OFF"})]},e.key)})]}),(0,R.jsxs)("div",{className:"mt-2 pt-2 border-t border-forest/20 flex items-center justify-between",children:[(0,R.jsxs)("span",{className:"mono-ui text-[10px] text-primary flex items-center gap-1",children:[(0,R.jsx)("span",{className:"w-1.5 h-1.5 bg-primary animate-pulse"}),"LIVE_AGGREGATION"]}),(0,R.jsx)("button",{onClick:()=>{le()},className:"mono-ui text-[9px] text-forest/50 hover:text-primary transition-colors cursor-pointer","data-testid":"refresh-health-btn",children:"REFRESH"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("span",{className:"mono-ui text-[12px] text-forest block mb-3 font-bold tracking-widest",children:"NODE_HEALTH"}),(0,R.jsx)("div",{className:"space-y-3",children:[{name:"LAGOS",pct:98,color:"bg-primary"},{name:"NAIROBI",pct:84,color:"bg-forest"},{name:"ACCRA",pct:91,color:"bg-primary"},{name:"JHB",pct:76,color:"bg-forest"}].map(e=>(0,R.jsxs)("div",{className:"space-y-1",children:[(0,R.jsxs)("div",{className:"flex justify-between mono-ui text-[12px]",children:[(0,R.jsxs)("span",{className:"text-content",children:[e.name,"_NODE"]}),(0,R.jsxs)("span",{className:"".concat("bg-primary"===e.color?"text-primary":"text-forest"," font-bold"),children:[e.pct,"%"]})]}),(0,R.jsx)("div",{className:"h-1 w-full bg-forest/20",children:(0,R.jsx)("div",{className:"h-full ".concat(e.color),style:{width:"".concat(e.pct,"%")}})})]},e.name))})]}),(0,R.jsxs)("div",{className:"grid grid-cols-2 gap-[1px] narvo-border bg-forest",children:[(0,R.jsxs)("div",{className:"bg-background-dark p-3 flex flex-col justify-between h-20",children:[(0,R.jsx)("span",{className:"mono-ui text-[11px] text-forest",children:"LISTENERS"}),(0,R.jsx)("span",{className:"font-display text-2xl font-bold text-content tracking-tighter",children:(null===K||void 0===K?void 0:K.total_listeners)||"14.2K"})]}),(0,R.jsxs)("div",{className:"bg-background-dark p-3 flex flex-col justify-between h-20",children:[(0,R.jsx)("span",{className:"mono-ui text-[11px] text-forest",children:"SOURCES"}),(0,R.jsx)("span",{className:"font-display text-2xl font-bold text-primary tracking-tighter",children:(null===K||void 0===K?void 0:K.total_sources)||"7"})]})]})]})]})]})}}}]);
//# sourceMappingURL=870.e0479950.chunk.js.map