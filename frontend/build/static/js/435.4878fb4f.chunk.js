"use strict";(self.webpackChunknarvo_frontend=self.webpackChunknarvo_frontend||[]).push([[435],{7302(e,a,t){t.d(a,{Ay:()=>o,Oi:()=>r,_N:()=>i,c$:()=>l,if:()=>c});t(5043);var s=t(579);const n=e=>{let{className:a="",variant:t="rect"}=e;const n="animate-pulse bg-forest/10";return"circle"===t?(0,s.jsx)("div",{className:"".concat(n," rounded-full ").concat(a)}):"text"===t?(0,s.jsx)("div",{className:"".concat(n," h-4 ").concat(a)}):(0,s.jsx)("div",{className:"".concat(n," ").concat(a)})},l=()=>(0,s.jsxs)("div",{className:"narvo-border bg-surface/30 flex flex-col md:flex-row min-h-[320px]",children:[(0,s.jsx)("div",{className:"md:w-1/2 bg-forest/5 min-h-[200px]"}),(0,s.jsxs)("div",{className:"flex-1 p-8 flex flex-col justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(n,{variant:"text",className:"w-40 h-3"}),(0,s.jsx)(n,{variant:"text",className:"w-full h-8"}),(0,s.jsx)(n,{variant:"text",className:"w-3/4 h-8"}),(0,s.jsx)(n,{variant:"text",className:"w-full h-4 mt-4"}),(0,s.jsx)(n,{variant:"text",className:"w-2/3 h-4"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(n,{className:"flex-1 h-12"}),(0,s.jsx)(n,{className:"w-12 h-12"}),(0,s.jsx)(n,{className:"w-12 h-12"})]})]})]}),r=()=>(0,s.jsxs)("div",{className:"p-6 narvo-border-b",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(n,{variant:"text",className:"w-24 h-4"}),(0,s.jsx)(n,{variant:"text",className:"w-14 h-4"})]}),(0,s.jsx)(n,{variant:"text",className:"w-20 h-4"})]}),(0,s.jsx)(n,{variant:"text",className:"w-full h-6 mb-2"}),(0,s.jsx)(n,{variant:"text",className:"w-3/4 h-6 mb-3"}),(0,s.jsx)(n,{variant:"text",className:"w-full h-4"}),(0,s.jsx)(n,{variant:"text",className:"w-2/3 h-4 mt-1"})]}),c=()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n,{className:"w-20 h-6"}),(0,s.jsx)(n,{className:"w-20 h-6"})]}),(0,s.jsx)(n,{variant:"text",className:"w-full h-12"}),(0,s.jsx)(n,{variant:"text",className:"w-4/5 h-12"}),(0,s.jsxs)("div",{className:"border-l-2 border-forest/20 pl-6 space-y-2",children:[(0,s.jsx)(n,{variant:"text",className:"w-full h-5"}),(0,s.jsx)(n,{variant:"text",className:"w-3/4 h-5"})]}),(0,s.jsx)(n,{className:"w-full h-[400px]"}),(0,s.jsx)(n,{className:"w-full h-16"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n,{variant:"text",className:"w-full h-4"}),(0,s.jsx)(n,{variant:"text",className:"w-full h-4"}),(0,s.jsx)(n,{variant:"text",className:"w-2/3 h-4"})]})]}),i=e=>{let{count:a=4}=e;return(0,s.jsx)("div",{className:"narvo-border bg-surface/20 divide-y divide-forest/10",children:Array.from({length:a}).map((e,a)=>(0,s.jsx)(r,{},a))})},o=n},6435(e,a,t){t.r(a),t.d(a,{default:()=>R});var s=t(5043),n=t(3216),l=t(3988),r=t(8357),c=t(3905),i=t(3654),o=t(9379),m=t(6667);const d=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,28H188V24a12,12,0,0,0-24,0v4H92V24a12,12,0,0,0-24,0v4H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V48A20,20,0,0,0,208,28ZM68,52a12,12,0,0,0,24,0h72a12,12,0,0,0,24,0h16V76H52V52ZM52,204V100H204V204Zm60-80v56a12,12,0,0,1-24,0V143.32a12,12,0,0,1-9.37-22l16-8A12,12,0,0,1,112,124Zm61.49,33.88L163.9,168H168a12,12,0,0,1,0,24H136a12,12,0,0,1-8.71-20.25L155.45,142a4,4,0,0,0,.55-2,4,4,0,0,0-7.47-2,12,12,0,0,1-20.78-12A28,28,0,0,1,180,140a27.77,27.77,0,0,1-5.64,16.86A10.63,10.63,0,0,1,173.49,157.88Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,48V88H40V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),s.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm59.16,30.45L152,176h16a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136,23.76,23.76,0,0,1,171.16,150.45Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM112,184a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm56-8a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136a23.76,23.76,0,0,1-4.84,14.45L152,176ZM48,80V48H72v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,34H182V24a6,6,0,0,0-12,0V34H86V24a6,6,0,0,0-12,0V34H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V48A14,14,0,0,0,208,34ZM48,46H74V56a6,6,0,0,0,12,0V46h84V56a6,6,0,0,0,12,0V46h26a2,2,0,0,1,2,2V82H46V48A2,2,0,0,1,48,46ZM208,210H48a2,2,0,0,1-2-2V94H210V208A2,2,0,0,1,208,210Zm-98-90v64a6,6,0,0,1-12,0V129.71l-7.32,3.66a6,6,0,1,1-5.36-10.74l16-8A6,6,0,0,1,110,120Zm59.57,29.25L148,178h20a6,6,0,0,1,0,12H136a6,6,0,0,1-4.8-9.6L160,142a10,10,0,1,0-16.65-11A6,6,0,1,1,133,125a22,22,0,1,1,36.62,24.26Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm59.16,30.45L152,176h16a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136,23.76,23.76,0,0,1,171.16,150.45Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,36H180V24a4,4,0,0,0-8,0V36H84V24a4,4,0,0,0-8,0V36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V48A12,12,0,0,0,208,36ZM48,44H76V56a4,4,0,0,0,8,0V44h88V56a4,4,0,0,0,8,0V44h28a4,4,0,0,1,4,4V84H44V48A4,4,0,0,1,48,44ZM208,212H48a4,4,0,0,1-4-4V92H212V208A4,4,0,0,1,208,212ZM108,120v64a4,4,0,0,1-8,0V126.47l-10.21,5.11a4,4,0,0,1-3.58-7.16l16-8A4,4,0,0,1,108,120Zm60,28-24,32h24a4,4,0,0,1,0,8H136a4,4,0,0,1-3.2-6.4l28.78-38.37A11.88,11.88,0,0,0,164,136a12,12,0,0,0-22.4-6,4,4,0,0,1-6.92-4A20,20,0,0,1,172,136,19.79,19.79,0,0,1,168,148Z"}))]]),x=s.forwardRef((e,a)=>s.createElement(m.A,(0,o.A)((0,o.A)({ref:a},e),{},{weights:d})));x.displayName="CalendarIcon";const h=x;var p=t(4989),u=t(6391),f=t(3494),v=t(7505),g=t(1739),N=t(3938);const j=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,52H168a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm176,16H40a12,12,0,0,0,0,24H216a12,12,0,0,0,0-24Zm-48,40H40a12,12,0,0,0,0,24H168a12,12,0,0,0,0-24Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,64V168a16,16,0,0,1-16,16H40V64Z",opacity:"0.2"}),s.createElement("path",{d:"M32,64a8,8,0,0,1,8-8H216a8,8,0,0,1,0,16H40A8,8,0,0,1,32,64Zm8,48H168a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm176,24H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Zm-48,40H40a8,8,0,0,0,0,16H168a8,8,0,0,0,0-16Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM160,184H64a8,8,0,0,1,0-16h96a8,8,0,0,1,0,16Zm32-32H64a8,8,0,0,1,0-16H192a8,8,0,0,1,0,16ZM56,112a8,8,0,0,1,8-8h96a8,8,0,0,1,0,16H64A8,8,0,0,1,56,112ZM192,88H64a8,8,0,0,1,0-16H192a8,8,0,0,1,0,16Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M34,64a6,6,0,0,1,6-6H216a6,6,0,0,1,0,12H40A6,6,0,0,1,34,64Zm6,46H168a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Zm176,28H40a6,6,0,0,0,0,12H216a6,6,0,0,0,0-12Zm-48,40H40a6,6,0,0,0,0,12H168a6,6,0,0,0,0-12Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M32,64a8,8,0,0,1,8-8H216a8,8,0,0,1,0,16H40A8,8,0,0,1,32,64Zm8,48H168a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm176,24H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Zm-48,40H40a8,8,0,0,0,0,16H168a8,8,0,0,0,0-16Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M36,64a4,4,0,0,1,4-4H216a4,4,0,0,1,0,8H40A4,4,0,0,1,36,64Zm4,44H168a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Zm176,32H40a4,4,0,0,0,0,8H216a4,4,0,0,0,0-8Zm-48,40H40a4,4,0,0,0,0,8H168a4,4,0,0,0,0-8Z"}))]]),y=s.forwardRef((e,a)=>s.createElement(m.A,(0,o.A)((0,o.A)({ref:a},e),{},{weights:j})));y.displayName="TextAlignLeftIcon";const b=y;var w=t(7302),A=t(4068);let H=!1,E=null,V=null,Z=null;async function k(){H||(await A.start(),Z=new A.Compressor({threshold:-20,ratio:4,attack:.003,release:.25}).toDestination(),V=new A.Reverb({decay:3,wet:.25}).connect(Z),E=new A.Gain(.7).connect(V),H=!0)}var M=t(579);const S="http://localhost:8000",R=()=>{var e,a,t;const o=(0,n.Zp)(),[m,d]=(0,s.useState)(null),[j,y]=(0,s.useState)(!0),[H,V]=(0,s.useState)(!1),[Z,R]=(0,s.useState)([]),[I,L]=(0,s.useState)(!0),{voiceModel:F,playTrack:T,currentTrack:C,isPlaying:G,isLoading:_,currentTime:O,duration:D}=(0,l.n)(),[P]=(0,s.useState)(F||"emma"),[B,q]=(0,s.useState)(!1),[U,Y]=(0,s.useState)(!0),K=(0,s.useRef)(null),W=(0,s.useRef)(null),[z,X]=(0,s.useState)(-1),$=(J=null===m||void 0===m?void 0:m.script)?J.split(/(?<=[.!?])\s+/).filter(e=>e.trim().length>0):[];var J;const Q=(null===C||void 0===C?void 0:C.id)===(null===m||void 0===m?void 0:m.id)&&G;(0,s.useEffect)(()=>{if(!Q||!$.length||!D)return void(Q||X(-1));const e=O/D,a=Math.min(Math.floor(e*$.length),$.length-1);X(a)},[O,D,Q,$.length]),(0,s.useEffect)(()=>{if(z<0||!W.current)return;const e=W.current.querySelector('[data-sentence="'.concat(z,'"]'));e&&e.scrollIntoView({behavior:"smooth",block:"center"})},[z]),(0,s.useEffect)(()=>{const e=()=>{U&&"NARVO_BRIEFING"===(null===C||void 0===C?void 0:C.source)&&async function(){await k();const e=A.now(),a=new A.PolySynth(A.Synth,{oscillator:{type:"triangle"},envelope:{attack:.1,decay:.4,sustain:.2,release:2.5},volume:-16}).connect(E);a.triggerAttackRelease(["G4","B4","D5"],"4n",e),a.triggerAttackRelease(["E4","G4","C5"],"4n",e+.4),a.triggerAttackRelease(["C4","E4","G4"],"2n",e+.8);const t=new A.Synth({oscillator:{type:"sine"},envelope:{attack:.2,decay:.8,sustain:.1,release:2},volume:-14}).connect(E);t.triggerAttackRelease("C2","2n",e+.8);const s=new A.Synth({oscillator:{type:"sine"},envelope:{attack:.3,decay:1,sustain:0,release:2},volume:-28}).connect(E);s.triggerAttackRelease("G5","2n",e+1.2),setTimeout(()=>{a.dispose(),t.dispose(),s.dispose()},6e3)}().catch(()=>{})},a=document.querySelector("audio");return a&&(a.addEventListener("ended",e),K.current={el:a,handler:e}),()=>{K.current&&K.current.el.removeEventListener("ended",K.current.handler)}},[U,C]),(0,s.useEffect)(()=>{Promise.all([fetch("".concat(S,"/api/briefing/latest")).then(e=>e.ok?e.json():null).catch(()=>null),fetch("".concat(S,"/api/briefing/history?limit=10")).then(e=>e.json()).catch(()=>({briefings:[]}))]).then(e=>{let[a,t]=e;a&&d(a),R(t.briefings||[]),y(!1),L(!1)})},[]);const ee=async()=>{V(!0);try{const e=await fetch("".concat(S,"/api/briefing/generate?voice_id=").concat(P,"&force_regenerate=true"));if(e.ok){const a=await e.json();d(a);const t=await fetch("".concat(S,"/api/briefing/history?limit=10"));if(t.ok){const e=await t.json();R(e.briefings||[])}}}catch(x){console.error("Error generating briefing:",x)}V(!1)},ae=async e=>{y(!0);try{const a=await fetch("".concat(S,"/api/briefing/").concat(e));if(a.ok){const e=await a.json();d(e)}}catch(x){console.error("Error loading briefing:",x)}y(!1)},te=(0,s.useCallback)(async()=>{if(U)try{await async function(){await k();const e=A.now(),a=new A.Synth({oscillator:{type:"sine"},envelope:{attack:.005,decay:.4,sustain:0,release:1.2},volume:-18}).connect(E);a.triggerAttackRelease("E5","8n",e);const t=new A.Synth({oscillator:{type:"triangle"},envelope:{attack:.15,decay:.3,sustain:0,release:.6},volume:-24}).connect(E);t.triggerAttackRelease("G3","4n",e+.05);const s=new A.NoiseSynth({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.1},volume:-30}).connect(E);s.triggerAttackRelease("32n",e+.02),setTimeout(()=>{a.dispose(),t.dispose(),s.dispose()},3e3)}()}catch(x){}},[U]),se=(new Date).toISOString().split("T")[0];return(0,M.jsxs)("main",{className:"flex-1 flex flex-col bg-background-dark min-w-0 min-h-0 overflow-hidden","data-testid":"briefing-page",children:[(0,M.jsxs)("div",{className:"h-12 md:h-14 flex items-center justify-between px-4 md:px-8 bg-surface/30 narvo-border-b shrink-0",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,M.jsx)(r.s,{className:"w-4 h-4 text-primary"}),(0,M.jsxs)("span",{className:"mono-ui text-[11px] md:text-xs text-forest",children:["MODULE: ",(0,M.jsx)("span",{className:"text-primary",children:"MORNING_BRIEFING"})]})]}),(0,M.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3",children:[(0,M.jsxs)("button",{onClick:ee,disabled:H,className:"h-7 md:h-8 px-2 md:px-3 bg-primary text-background-dark mono-ui text-[10px] md:text-[11px] font-bold hover:bg-white transition-all disabled:opacity-50 flex items-center gap-1","data-testid":"generate-btn",children:[(0,M.jsx)(c.S,{className:"w-3 h-3 ".concat(H?"animate-spin":"")}),(0,M.jsx)("span",{className:"hidden xs:inline",children:H?"GEN...":"NEW"})]}),(0,M.jsxs)("button",{onClick:()=>Y(e=>!e),className:"h-7 md:h-8 px-2 narvo-border mono-ui text-[10px] md:text-[11px] font-bold flex items-center gap-1 transition-all ".concat(U?"bg-primary/10 border-primary text-primary":"text-forest hover:text-content"),"data-testid":"sfx-toggle",children:[(0,M.jsx)(i.o,{weight:U?"fill":"regular",className:"w-3 h-3"}),(0,M.jsx)("span",{className:"hidden sm:inline",children:"SFX"})]})]})]}),(0,M.jsxs)("button",{onClick:()=>q(e=>!e),className:"lg:hidden h-10 flex items-center justify-between px-4 bg-surface/20 narvo-border-b","data-testid":"archive-toggle",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)(h,{className:"w-3.5 h-3.5 text-primary"}),(0,M.jsx)("span",{className:"mono-ui text-[11px] text-forest font-bold",children:"ARCHIVE_LOG"}),(0,M.jsxs)("span",{className:"mono-ui text-[9px] text-forest/50",children:[Z.length," ENTRIES"]})]}),B?(0,M.jsx)(p.Z,{className:"w-3 h-3 text-forest"}):(0,M.jsx)(u.a,{className:"w-3 h-3 text-forest"})]}),B&&(0,M.jsx)("div",{className:"lg:hidden max-h-48 overflow-y-auto bg-surface/10 narvo-border-b px-2 py-1 space-y-1",children:Z.map(e=>{var a;return(0,M.jsxs)("button",{onClick:()=>{ae(e.date),q(!1)},className:"w-full p-2.5 text-left narvo-border transition-all text-[11px] ".concat((null===m||void 0===m?void 0:m.date)===e.date?"border-primary bg-primary/5":"hover:bg-surface/30"),children:[(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("span",{className:"mono-ui font-bold ".concat((null===m||void 0===m?void 0:m.date)===e.date?"text-primary":"text-forest"),children:new Date(e.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),e.date===se&&(0,M.jsx)("span",{className:"mono-ui text-[9px] text-primary bg-primary/10 px-1 py-0.5",children:"TODAY"})]}),(0,M.jsxs)("span",{className:"mono-ui text-[10px] text-forest/60",children:[(null===(a=e.stories)||void 0===a?void 0:a.length)||0," STORIES"]})]},e.date)})}),(0,M.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row min-h-0 overflow-hidden",children:[(0,M.jsx)("section",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scroll p-4 md:p-8 pb-32 md:pb-8 min-w-0",children:(0,M.jsx)("div",{className:"max-w-3xl mx-auto lg:mx-0",children:j?(0,M.jsxs)("div",{className:"space-y-6",children:[(0,M.jsxs)("div",{className:"narvo-border bg-surface/30 p-6 md:p-8",children:[(0,M.jsx)(w.Ay,{variant:"text",className:"w-32 h-3 mb-4"}),(0,M.jsx)(w.Ay,{variant:"text",className:"w-3/4 h-8 mb-3"}),(0,M.jsx)(w.Ay,{variant:"text",className:"w-24 h-5 mb-6"}),(0,M.jsx)(w.Ay,{className:"w-48 h-12"})]}),(0,M.jsx)(w._N,{count:4})]}):m?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"narvo-border bg-surface/50 p-4 md:p-8 mb-4 md:mb-6",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-2 md:mb-3",children:[(0,M.jsx)("span",{className:"w-2 h-2 bg-primary animate-pulse"}),(0,M.jsx)("span",{className:"mono-ui text-[11px] md:text-[12px] text-primary font-bold tracking-widest",children:m.date===se?"LIVE_BROADCAST":"ARCHIVED_BROADCAST"})]}),(0,M.jsx)("h2",{className:"font-display text-lg md:text-3xl text-content mb-2 md:mb-3 uppercase tracking-tight",children:m.title}),(0,M.jsxs)("div",{className:"flex flex-wrap items-center gap-3 md:gap-4 mb-4 md:mb-6",children:[(0,M.jsxs)("span",{className:"mono-ui text-[10px] md:text-[12px] text-forest narvo-border px-2 py-0.5 flex items-center gap-1",children:[(0,M.jsx)(f.z,{className:"w-3 h-3"}),m.duration_estimate]}),(0,M.jsxs)("span",{className:"mono-ui text-[10px] md:text-[12px] text-forest",children:[(null===(e=m.stories)||void 0===e?void 0:e.length)||0," STORIES"]}),(0,M.jsxs)("span",{className:"mono-ui text-[10px] md:text-[12px] text-forest uppercase",children:["VOICE: ",m.voice_id||"NOVA"]})]}),(0,M.jsxs)("button",{onClick:async()=>{if(null!==m&&void 0!==m&&m.audio_url){if(U){try{await async function(){await k();const e=A.now(),a=new A.Synth({oscillator:{type:"sine"},envelope:{attack:.3,decay:.6,sustain:.4,release:1.5},volume:-12}).connect(E);a.triggerAttackRelease("C2","2n",e);const t=new A.PolySynth(A.Synth,{oscillator:{type:"triangle"},envelope:{attack:.4,decay:.5,sustain:.3,release:2},volume:-16}).connect(E);t.triggerAttackRelease(["C3","E3","G3"],"2n",e+.2),t.triggerAttackRelease(["C4","E4","G4"],"4n",e+.6);const s=new A.PolySynth(A.Synth,{oscillator:{type:"square"},envelope:{attack:.01,decay:.15,sustain:0,release:.6},volume:-20}).connect(E);s.triggerAttackRelease(["E5","G5","B5"],"16n",e+1);const n=new A.NoiseSynth({noise:{type:"pink"},envelope:{attack:.6,decay:.4,sustain:0,release:.5},volume:-26}),l=new A.Filter({frequency:200,type:"lowpass"}).connect(E);n.connect(l),l.frequency.rampTo(4e3,.8,e+.1),n.triggerAttackRelease("1n",e+.1),setTimeout(()=>{a.dispose(),t.dispose(),s.dispose(),n.dispose(),l.dispose()},5e3)}()}catch(x){}await new Promise(e=>setTimeout(e,1400))}T({id:m.id,title:m.title,url:m.audio_url,source:"NARVO_BRIEFING"})}},disabled:!m.audio_url||_,className:"".concat(Q?"bg-white":"bg-primary hover:bg-white"," text-background-dark font-display font-bold px-4 md:px-6 py-2 md:py-3 text-sm md:text-base transition-all flex items-center gap-2 disabled:opacity-50"),"data-testid":"play-briefing-btn",children:[_?(0,M.jsx)("div",{className:"w-5 h-5 border-2 border-background-dark border-t-transparent animate-spin rounded-full"}):Q?(0,M.jsx)(v.v,{className:"w-5 h-5"}):(0,M.jsx)(g.j,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:Q?"PAUSE":"PLAY BRIEFING"})]})]}),(0,M.jsxs)("div",{className:"narvo-border bg-surface/20 divide-y divide-forest/10",children:[(0,M.jsxs)("div",{className:"p-3 md:p-4 flex items-center justify-between",children:[(0,M.jsx)("span",{className:"mono-ui text-[11px] md:text-[12px] text-forest font-bold tracking-widest",children:"STORIES_INCLUDED"}),(0,M.jsxs)("span",{className:"mono-ui text-[9px] md:text-[10px] text-forest/60",children:[(null===(a=m.stories)||void 0===a?void 0:a.length)||0," / 5 SEGMENTS"]})]}),null===(t=m.stories)||void 0===t?void 0:t.map((e,a)=>(0,M.jsxs)("div",{onClick:()=>{te(),o("/news/".concat(e.id))},className:"p-3 md:p-4 flex gap-2 md:gap-3 hover:bg-surface/40 transition-colors cursor-pointer group","data-testid":"story-".concat(a),children:[(0,M.jsx)("span",{className:"mono-ui text-[11px] md:text-[12px] text-primary font-bold shrink-0",children:String(a+1).padStart(2,"0")}),(0,M.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,M.jsx)("span",{className:"mono-ui text-[9px] md:text-[10px] text-forest/60 uppercase",children:e.category||"GENERAL"}),(0,M.jsx)("span",{className:"text-forest/30",children:"\u2022"}),(0,M.jsx)("span",{className:"mono-ui text-[9px] md:text-[10px] text-forest/60",children:e.source})]}),(0,M.jsx)("span",{className:"text-slate-300 text-xs md:text-sm group-hover:text-primary transition-colors line-clamp-2",children:e.title})]}),(0,M.jsx)(N.K,{className:"w-4 h-4 text-forest/30 group-hover:text-primary transition-colors shrink-0"})]},e.id||a))]}),m.script&&(0,M.jsxs)("div",{className:"lg:hidden narvo-border bg-surface/10 mt-4",children:[(0,M.jsxs)("div",{className:"p-3 narvo-border-b flex items-center gap-2",children:[(0,M.jsx)(b,{className:"w-3.5 h-3.5 text-primary"}),(0,M.jsx)("span",{className:"mono-ui text-[11px] text-forest font-bold tracking-widest",children:"TRANSCRIPT"}),Q&&(0,M.jsx)("span",{className:"mono-ui text-[9px] text-primary animate-pulse",children:"LIVE"})]}),(0,M.jsx)("div",{className:"p-3 max-h-64 overflow-y-auto custom-scroll",ref:W,children:$.map((e,a)=>(0,M.jsxs)("span",{"data-sentence":a,className:"mono-ui text-[12px] leading-relaxed inline transition-colors duration-300 ".concat(a===z?"text-primary font-bold bg-primary/5":a<z?"text-forest/50":"text-forest/80"),children:[e," "]},a))})]})]}):(0,M.jsxs)("div",{className:"text-center py-12 md:py-20",children:[(0,M.jsx)("div",{className:"w-16 h-16 md:w-20 md:h-20 mx-auto mb-6 narvo-border flex items-center justify-center",children:(0,M.jsx)(r.s,{className:"w-8 h-8 md:w-10 md:h-10 text-forest/30"})}),(0,M.jsx)("h3",{className:"font-display text-lg text-content uppercase mb-3",children:"NO_BRIEFING_LOADED"}),(0,M.jsx)("p",{className:"mono-ui text-[12px] text-forest mb-6",children:"Generate your first morning briefing"}),(0,M.jsxs)("button",{onClick:ee,disabled:H,className:"bg-primary text-background-dark font-display font-bold px-6 py-3 text-sm hover:bg-white transition-all disabled:opacity-50 flex items-center gap-2 mx-auto","data-testid":"generate-briefing-btn",children:[(0,M.jsx)(c.S,{className:"w-4 h-4 ".concat(H?"animate-spin":"")}),H?"GENERATING...":"[ GENERATE BRIEFING ]"]})]})})}),(0,M.jsxs)("aside",{className:"hidden lg:flex lg:w-80 xl:w-96 narvo-border-l bg-surface/5 flex-col shrink-0",children:[null!==m&&void 0!==m&&m.script?(0,M.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,M.jsxs)("div",{className:"h-12 flex items-center justify-between px-4 narvo-border-b bg-surface/20 shrink-0",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)(b,{className:"w-4 h-4 text-primary"}),(0,M.jsx)("span",{className:"mono-ui text-[12px] text-forest font-bold tracking-widest",children:"TRANSCRIPT"})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[Q&&(0,M.jsx)("span",{className:"mono-ui text-[10px] text-primary bg-primary/10 px-1.5 py-0.5 animate-pulse font-bold",children:"LIVE"}),(0,M.jsxs)("span",{className:"mono-ui text-[10px] text-forest/50",children:[$.length," LINES"]})]})]}),(0,M.jsx)("div",{className:"flex-1 overflow-y-auto custom-scroll p-4 xl:p-6",ref:W,"data-testid":"transcript-panel",children:(0,M.jsx)("div",{className:"space-y-0",children:$.map((e,a)=>(0,M.jsxs)("span",{"data-sentence":a,className:"mono-ui text-[12px] xl:text-[13px] leading-[1.8] inline transition-all duration-300 ".concat(a===z?"text-primary font-bold bg-primary/5 px-0.5":a<z?"text-forest/40":"text-forest/80"),children:[e," "]},a))})})]}):(0,M.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,M.jsxs)("div",{className:"text-center space-y-3",children:[(0,M.jsx)(b,{className:"w-10 h-10 text-forest/20 mx-auto"}),(0,M.jsx)("p",{className:"mono-ui text-[11px] text-forest/40",children:"TRANSCRIPT WILL APPEAR HERE"})]})}),(0,M.jsxs)("div",{className:"narvo-border-t shrink-0",children:[(0,M.jsxs)("div",{className:"h-10 flex items-center justify-between px-4 bg-surface/20",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)(h,{className:"w-3.5 h-3.5 text-primary"}),(0,M.jsx)("span",{className:"mono-ui text-[11px] text-forest font-bold tracking-widest",children:"ARCHIVE_LOG"})]}),(0,M.jsxs)("span",{className:"mono-ui text-[9px] text-forest/50",children:[Z.length," ENTRIES"]})]}),(0,M.jsx)("div",{className:"max-h-48 overflow-y-auto custom-scroll p-2 space-y-1",children:I?Array.from({length:3}).map((e,a)=>(0,M.jsx)(w.Ay,{className:"w-full h-12"},a)):0===Z.length?(0,M.jsx)("div",{className:"p-3 text-center",children:(0,M.jsx)("p",{className:"mono-ui text-[10px] text-forest/50",children:"NO_HISTORY"})}):Z.map(e=>{var a;return(0,M.jsxs)("button",{onClick:()=>ae(e.date),className:"w-full p-2.5 text-left narvo-border transition-all ".concat((null===m||void 0===m?void 0:m.date)===e.date?"border-primary bg-primary/5":"hover:border-forest hover:bg-surface/30"),"data-testid":"history-".concat(e.date),children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-0.5",children:[(0,M.jsx)("span",{className:"mono-ui text-[10px] font-bold ".concat((null===m||void 0===m?void 0:m.date)===e.date?"text-primary":"text-forest"),children:new Date(e.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),e.date===se&&(0,M.jsx)("span",{className:"mono-ui text-[9px] text-primary bg-primary/10 px-1 py-0.5",children:"TODAY"})]}),(0,M.jsxs)("span",{className:"mono-ui text-[9px] ".concat((null===m||void 0===m?void 0:m.date)===e.date?"text-content":"text-forest/60"),children:[(null===(a=e.stories)||void 0===a?void 0:a.length)||0," STORIES \u2022 ",e.duration_estimate||"~3 MIN"]})]},e.date)})})]})]})]})]})}},3905(e,a,t){t.d(a,{S:()=>i});var s=t(9379),n=t(5043),l=t(6667);const r=new Map([["bold",n.createElement(n.Fragment,null,n.createElement("path",{d:"M244,56v48a12,12,0,0,1-12,12H184a12,12,0,1,1,0-24H201.1l-19-17.38c-.13-.12-.26-.24-.38-.37A76,76,0,1,0,127,204h1a75.53,75.53,0,0,0,52.15-20.72,12,12,0,0,1,16.49,17.45A99.45,99.45,0,0,1,128,228h-1.37A100,100,0,1,1,198.51,57.06L220,76.72V56a12,12,0,0,1,24,0Z"}))],["duotone",n.createElement(n.Fragment,null,n.createElement("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"}),n.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"}))],["fill",n.createElement(n.Fragment,null,n.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1-5.66-13.66l17-17-10.55-9.65-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,1,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60l10.93,10L226.34,50.3A8,8,0,0,1,240,56Z"}))],["light",n.createElement(n.Fragment,null,n.createElement("path",{d:"M238,56v48a6,6,0,0,1-6,6H184a6,6,0,0,1,0-12h32.55l-30.38-27.8c-.06-.06-.12-.13-.19-.19a82,82,0,1,0-1.7,117.65,6,6,0,0,1,8.24,8.73A93.46,93.46,0,0,1,128,222h-1.28A94,94,0,1,1,194.37,61.4L226,90.35V56a6,6,0,1,1,12,0Z"}))],["regular",n.createElement(n.Fragment,null,n.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"}))],["thin",n.createElement(n.Fragment,null,n.createElement("path",{d:"M236,56v48a4,4,0,0,1-4,4H184a4,4,0,0,1,0-8h37.7L187.53,68.69l-.13-.12a84,84,0,1,0-1.75,120.51,4,4,0,0,1,5.5,5.82A91.43,91.43,0,0,1,128,220h-1.26A92,92,0,1,1,193,62.84l35,32.05V56a4,4,0,1,1,8,0Z"}))]]),c=n.forwardRef((e,a)=>n.createElement(l.A,(0,s.A)((0,s.A)({ref:a},e),{},{weights:r})));c.displayName="ArrowClockwiseIcon";const i=c},3938(e,a,t){t.d(a,{K:()=>i});var s=t(9379),n=t(5043),l=t(6667);const r=new Map([["bold",n.createElement(n.Fragment,null,n.createElement("path",{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"}))],["duotone",n.createElement(n.Fragment,null,n.createElement("path",{d:"M176,128,96,208V48Z",opacity:"0.2"}),n.createElement("path",{d:"M181.66,122.34l-80-80A8,8,0,0,0,88,48V208a8,8,0,0,0,13.66,5.66l80-80A8,8,0,0,0,181.66,122.34ZM104,188.69V67.31L164.69,128Z"}))],["fill",n.createElement(n.Fragment,null,n.createElement("path",{d:"M181.66,133.66l-80,80A8,8,0,0,1,88,208V48a8,8,0,0,1,13.66-5.66l80,80A8,8,0,0,1,181.66,133.66Z"}))],["light",n.createElement(n.Fragment,null,n.createElement("path",{d:"M180.24,132.24l-80,80a6,6,0,0,1-8.48-8.48L167.51,128,91.76,52.24a6,6,0,0,1,8.48-8.48l80,80A6,6,0,0,1,180.24,132.24Z"}))],["regular",n.createElement(n.Fragment,null,n.createElement("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"}))],["thin",n.createElement(n.Fragment,null,n.createElement("path",{d:"M178.83,130.83l-80,80a4,4,0,0,1-5.66-5.66L170.34,128,93.17,50.83a4,4,0,0,1,5.66-5.66l80,80A4,4,0,0,1,178.83,130.83Z"}))]]),c=n.forwardRef((e,a)=>n.createElement(l.A,(0,s.A)((0,s.A)({ref:a},e),{},{weights:r})));c.displayName="CaretRightIcon";const i=c}}]);
//# sourceMappingURL=435.4878fb4f.chunk.js.map