"use strict";(self.webpackChunknarvo_frontend=self.webpackChunknarvo_frontend||[]).push([[81],{7302(e,a,t){t.d(a,{Ay:()=>m,Oi:()=>n,_N:()=>o,c$:()=>r,if:()=>c});t(5043);var s=t(579);const l=e=>{let{className:a="",variant:t="rect"}=e;const l="animate-pulse bg-forest/10";return"circle"===t?(0,s.jsx)("div",{className:"".concat(l," rounded-full ").concat(a)}):"text"===t?(0,s.jsx)("div",{className:"".concat(l," h-4 ").concat(a)}):(0,s.jsx)("div",{className:"".concat(l," ").concat(a)})},r=()=>(0,s.jsxs)("div",{className:"narvo-border bg-surface/30 flex flex-col md:flex-row min-h-[320px]",children:[(0,s.jsx)("div",{className:"md:w-1/2 bg-forest/5 min-h-[200px]"}),(0,s.jsxs)("div",{className:"flex-1 p-8 flex flex-col justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(l,{variant:"text",className:"w-40 h-3"}),(0,s.jsx)(l,{variant:"text",className:"w-full h-8"}),(0,s.jsx)(l,{variant:"text",className:"w-3/4 h-8"}),(0,s.jsx)(l,{variant:"text",className:"w-full h-4 mt-4"}),(0,s.jsx)(l,{variant:"text",className:"w-2/3 h-4"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(l,{className:"flex-1 h-12"}),(0,s.jsx)(l,{className:"w-12 h-12"}),(0,s.jsx)(l,{className:"w-12 h-12"})]})]})]}),n=()=>(0,s.jsxs)("div",{className:"p-6 narvo-border-b",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(l,{variant:"text",className:"w-24 h-4"}),(0,s.jsx)(l,{variant:"text",className:"w-14 h-4"})]}),(0,s.jsx)(l,{variant:"text",className:"w-20 h-4"})]}),(0,s.jsx)(l,{variant:"text",className:"w-full h-6 mb-2"}),(0,s.jsx)(l,{variant:"text",className:"w-3/4 h-6 mb-3"}),(0,s.jsx)(l,{variant:"text",className:"w-full h-4"}),(0,s.jsx)(l,{variant:"text",className:"w-2/3 h-4 mt-1"})]}),c=()=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l,{className:"w-20 h-6"}),(0,s.jsx)(l,{className:"w-20 h-6"})]}),(0,s.jsx)(l,{variant:"text",className:"w-full h-12"}),(0,s.jsx)(l,{variant:"text",className:"w-4/5 h-12"}),(0,s.jsxs)("div",{className:"border-l-2 border-forest/20 pl-6 space-y-2",children:[(0,s.jsx)(l,{variant:"text",className:"w-full h-5"}),(0,s.jsx)(l,{variant:"text",className:"w-3/4 h-5"})]}),(0,s.jsx)(l,{className:"w-full h-[400px]"}),(0,s.jsx)(l,{className:"w-full h-16"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(l,{variant:"text",className:"w-full h-4"}),(0,s.jsx)(l,{variant:"text",className:"w-full h-4"}),(0,s.jsx)(l,{variant:"text",className:"w-2/3 h-4"})]})]}),o=e=>{let{count:a=4}=e;return(0,s.jsx)("div",{className:"narvo-border bg-surface/20 divide-y divide-forest/10",children:Array.from({length:a}).map((e,a)=>(0,s.jsx)(n,{},a))})},m=l},8851(e,a,t){t.d(a,{T:()=>o});var s=t(9379),l=t(5043),r=t(4395);const n="http://localhost:8000",c="narvo_bookmarks",o=()=>{const{user:e}=(0,r.A)(),[a,t]=(0,l.useState)([]),[o,m]=(0,l.useState)(!1),i=()=>{try{return JSON.parse(localStorage.getItem(c)||"[]")}catch(e){return[]}},d=e=>{localStorage.setItem(c,JSON.stringify(e))},x=(0,l.useCallback)(async()=>{if(e){m(!0);try{const a=await fetch("".concat(n,"/api/bookmarks?user_id=").concat(e.id));if(a.ok){const e=await a.json();t(e),d(e)}else t(i())}catch(a){t(i())}m(!1)}else t(i())},[e]);(0,l.useEffect)(()=>{x()},[x]);return{bookmarks:a,loading:o,addBookmark:async l=>{const r={story_id:l.id,title:l.title,summary:l.summary||"",source:l.source||"",category:l.category||"General",source_url:l.source_url||"",saved_at:(new Date).toISOString()},c=[...a.filter(e=>e.story_id!==l.id),r];if(t(c),d(c),e)try{await fetch("".concat(n,"/api/bookmarks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,s.A)({user_id:e.id},r))})}catch(o){console.error("Failed to sync bookmark:",o)}},removeBookmark:async s=>{const l=a.filter(e=>e.story_id!==s);if(t(l),d(l),e)try{await fetch("".concat(n,"/api/bookmarks/").concat(s,"?user_id=").concat(e.id),{method:"DELETE"})}catch(r){console.error("Failed to remove bookmark:",r)}},isBookmarked:e=>a.some(a=>a.story_id===e),fetchBookmarks:x}}},9081(e,a,t){t.r(a),t.d(a,{default:()=>u});var s=t(5043),l=t(5475),r=t(3216),n=t(3988),c=t(8851),o=t(5130),m=t(7980),i=t(8967),d=t(7505),x=t(1739),h=t(6381),p=t(7302),f=t(579);const u=()=>{const e=(0,r.Zp)(),{playTrack:a,currentTrack:t,isPlaying:u}=(0,n.n)(),{bookmarks:v,loading:N}=(0,c.T)(),{removeBookmark:j}=(0,c.T)(),[g,b]=(0,s.useState)([]);(0,s.useEffect)(()=>{(0,o.at)().then(b)},[]);const y=e=>g.includes(e);return(0,f.jsxs)("main",{className:"flex-1 flex flex-col bg-background-dark min-w-0 min-h-0 overflow-hidden","data-testid":"bookmarks-page",children:[(0,f.jsxs)("div",{className:"h-12 md:h-14 flex items-center justify-between px-4 md:px-8 bg-surface/30 narvo-border-b shrink-0",children:[(0,f.jsxs)("span",{className:"mono-ui text-[12px] md:text-xs text-forest",children:["MODULE: ",(0,f.jsx)("span",{className:"text-primary",children:"SAVED_TRANSMISSIONS"})]}),(0,f.jsxs)("span",{className:"mono-ui text-[12px] md:text-xs text-forest",children:[v.length," ITEMS"]})]}),(0,f.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scroll p-4 md:p-8 pb-32 md:pb-8",children:(0,f.jsx)("div",{className:"max-w-4xl mx-auto",children:N?(0,f.jsx)(p._N,{count:3}):(0,f.jsxs)(f.Fragment,{children:[v.length>0&&(0,f.jsxs)("div",{className:"narvo-border bg-surface/20 p-3 md:p-4 mb-6 md:mb-8 flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-3",children:[(0,f.jsx)("div",{className:"w-2 h-2 bg-primary animate-pulse"}),(0,f.jsxs)("span",{className:"mono-ui text-[11px] md:text-[12px] text-forest",children:["OFFLINE_CACHE: ",(0,f.jsxs)("span",{className:"text-primary",children:[g.filter(e=>v.some(a=>a.story_id===e)).length," / ",v.length]})]})]}),(0,f.jsx)("span",{className:"mono-ui text-[10px] md:text-[11px] text-forest/50 sm:ml-auto",children:"Play to cache audio"})]}),0===v.length?(0,f.jsxs)("div",{className:"narvo-border bg-surface/20 p-8 md:p-12 text-center",children:[(0,f.jsx)(m.X,{className:"w-10 h-10 md:w-12 md:h-12 text-forest mx-auto mb-3 md:mb-4"}),(0,f.jsx)("h3",{className:"font-display text-lg md:text-xl text-content mb-2 uppercase",children:"No Saved Stories"}),(0,f.jsx)("p",{className:"text-forest text-xs md:text-sm mb-4 md:mb-6 font-mono",children:"Bookmark stories to access them offline."}),(0,f.jsx)(l.N_,{to:"/dashboard",className:"bg-primary text-background-dark font-display font-bold px-4 md:px-6 py-2 md:py-3 text-sm md:text-base hover:bg-white transition-all inline-block","data-testid":"go-to-feed-btn",children:"[Go to Feed]"})]}):(0,f.jsx)("div",{className:"narvo-border bg-surface/20 divide-y divide-forest/10","data-testid":"bookmarks-list",children:v.map(s=>{var l;return(0,f.jsx)("div",{className:"p-4 md:p-6 group hover:bg-surface/40 transition-colors cursor-pointer",onClick:()=>e("/news/".concat(s.story_id)),"data-testid":"bookmark-card-".concat(s.story_id),children:(0,f.jsxs)("div",{className:"flex flex-col gap-2 md:gap-3",children:[(0,f.jsxs)("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,f.jsx)("span",{className:"bg-forest/20 text-primary mono-ui text-[10px] md:text-[11px] px-1.5 md:px-2 py-0.5 border border-forest/30",children:null===(l=s.category)||void 0===l?void 0:l.toUpperCase()}),y(s.story_id)&&(0,f.jsxs)("span",{className:"mono-ui text-[9px] md:text-[10px] text-forest flex items-center gap-1 border border-forest/30 px-1 md:px-1.5 py-0.5","data-testid":"cached-badge-".concat(s.story_id),children:[(0,f.jsx)(i.J,{className:"w-2.5 h-2.5 md:w-3 md:h-3"})," CACHED"]})]}),(0,f.jsx)("span",{className:"mono-ui text-[9px] md:text-[10px] text-forest/50",children:s.source})]}),(0,f.jsx)("h3",{className:"font-display text-base md:text-xl font-bold uppercase tracking-tight text-content group-hover:text-primary transition-colors leading-tight",children:s.title}),(0,f.jsx)("p",{className:"text-xs md:text-sm text-forest font-mono leading-relaxed opacity-70 line-clamp-2",children:s.summary}),(0,f.jsxs)("div",{className:"flex items-center gap-3 md:gap-6 pt-1",children:[(0,f.jsxs)("button",{onClick:e=>{e.stopPropagation(),a({id:s.story_id,title:s.title,summary:s.summary,source:s.source})},className:"mono-ui text-[11px] md:text-[12px] text-primary flex items-center gap-2 hover:text-content transition-colors","data-testid":"play-bookmark-".concat(s.story_id),children:[(null===t||void 0===t?void 0:t.id)===s.story_id&&u?(0,f.jsx)(d.v,{className:"w-4 h-4"}):(0,f.jsx)(x.j,{className:"w-4 h-4"}),(0,f.jsx)("span",{className:"hidden sm:inline",children:y(s.story_id)?"PLAY_OFFLINE":"GENERATE_AUDIO"}),(0,f.jsx)("span",{className:"sm:hidden",children:"PLAY"})]}),(0,f.jsx)("div",{className:"flex-1 h-[1px] bg-forest/10 hidden md:block"}),(0,f.jsxs)("span",{className:"mono-ui text-[9px] md:text-[10px] text-forest/50 hidden md:inline",children:["SAVED: ",new Date(s.saved_at).toLocaleDateString()]}),(0,f.jsx)("button",{onClick:e=>{e.stopPropagation(),(async e=>{j(e),await(0,o.dZ)(e),b(a=>a.filter(a=>a!==e))})(s.story_id)},className:"text-forest hover:text-red-400 transition-colors ml-auto md:ml-0","data-testid":"remove-bookmark-".concat(s.story_id),children:(0,f.jsx)(h.l,{className:"w-4 h-4"})})]})]})},s.story_id)})})]})})})]})}},7980(e,a,t){t.d(a,{X:()=>o});var s=t(9379),l=t(5043),r=t(6667);const n=new Map([["bold",l.createElement(l.Fragment,null,l.createElement("path",{d:"M184,28H72A20,20,0,0,0,52,48V224a12,12,0,0,0,18.36,10.18l57.63-36,57.65,36A12,12,0,0,0,204,224V48A20,20,0,0,0,184,28Zm-4,24V154.35l-45.65-28.53a12,12,0,0,0-12.72,0L76,154.35V52ZM134.35,173.82a12,12,0,0,0-12.72,0L76,202.35v-19.7l52-32.5,52,32.5v19.7Z"}))],["duotone",l.createElement(l.Fragment,null,l.createElement("path",{d:"M192,176v48l-64-40L64,224V176l64-40Z",opacity:"0.2"}),l.createElement("path",{d:"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Zm0,16V161.57l-51.77-32.35a8,8,0,0,0-8.48,0L72,161.56V48ZM132.23,177.22a8,8,0,0,0-8.48,0L72,209.57V180.43l56-35,56,35v29.14Z"}))],["fill",l.createElement(l.Fragment,null,l.createElement("path",{d:"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32ZM132.23,177.22a8,8,0,0,0-8.48,0L72,209.57V180.43l56-35,56,35v29.14Z"}))],["light",l.createElement(l.Fragment,null,l.createElement("path",{d:"M184,34H72A14,14,0,0,0,58,48V224a6,6,0,0,0,9.18,5.09l60.81-38,60.83,38A6,6,0,0,0,198,224V48A14,14,0,0,0,184,34ZM72,46H184a2,2,0,0,1,2,2V165.18l-54.83-34.27a6,6,0,0,0-6.36,0L70,165.17V48A2,2,0,0,1,72,46Zm59.17,132.91a6,6,0,0,0-6.36,0L70,213.17V179.33l58-36.25,58,36.25v33.84Z"}))],["regular",l.createElement(l.Fragment,null,l.createElement("path",{d:"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Zm0,16V161.57l-51.77-32.35a8,8,0,0,0-8.48,0L72,161.56V48ZM132.23,177.22a8,8,0,0,0-8.48,0L72,209.57V180.43l56-35,56,35v29.14Z"}))],["thin",l.createElement(l.Fragment,null,l.createElement("path",{d:"M184,36H72A12,12,0,0,0,60,48V224a4,4,0,0,0,6.12,3.39L128,188.72l61.89,38.67A4,4,0,0,0,192,228a4.06,4.06,0,0,0,1.94-.5A4,4,0,0,0,196,224V48A12,12,0,0,0,184,36ZM72,44H184a4,4,0,0,1,4,4V168.78l-57.89-36.17a4,4,0,0,0-4.24,0L68,168.78V48A4,4,0,0,1,72,44Zm58.11,136.61a4,4,0,0,0-4.24,0L68,216.78V178.22l60-37.5,60,37.5v38.56Z"}))]]),c=l.forwardRef((e,a)=>l.createElement(r.A,(0,s.A)((0,s.A)({ref:a},e),{},{weights:n})));c.displayName="BookmarkIcon";const o=c},8967(e,a,t){t.d(a,{J:()=>o});var s=t(9379),l=t(5043),r=t(6667);const n=new Map([["bold",l.createElement(l.Fragment,null,l.createElement("path",{d:"M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z"}))],["duotone",l.createElement(l.Fragment,null,l.createElement("path",{d:"M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z",opacity:"0.2"}),l.createElement("path",{d:"M205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["fill",l.createElement(l.Fragment,null,l.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["light",l.createElement(l.Fragment,null,l.createElement("path",{d:"M228.24,76.24l-128,128a6,6,0,0,1-8.48,0l-56-56a6,6,0,0,1,8.48-8.48L96,191.51,219.76,67.76a6,6,0,0,1,8.48,8.48Z"}))],["regular",l.createElement(l.Fragment,null,l.createElement("path",{d:"M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"}))],["thin",l.createElement(l.Fragment,null,l.createElement("path",{d:"M226.83,74.83l-128,128a4,4,0,0,1-5.66,0l-56-56a4,4,0,0,1,5.66-5.66L96,194.34,221.17,69.17a4,4,0,1,1,5.66,5.66Z"}))]]),c=l.forwardRef((e,a)=>l.createElement(r.A,(0,s.A)((0,s.A)({ref:a},e),{},{weights:n})));c.displayName="CheckIcon";const o=c}}]);
//# sourceMappingURL=81.f9baaa6a.chunk.js.map