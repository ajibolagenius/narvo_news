{"version":3,"file":"static/js/81.ce0a03b7.chunk.js","mappings":"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","sources":["hooks/useBookmarks.js","lib/audioCache.js","pages/BookmarksPage.js","../node_modules/@phosphor-icons/react/dist/defs/Bookmark.es.js","../node_modules/@phosphor-icons/react/dist/csr/Bookmark.es.js","../node_modules/@phosphor-icons/react/dist/defs/Check.es.js","../node_modules/@phosphor-icons/react/dist/csr/Check.es.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || '';\nconst BOOKMARKS_KEY = 'narvo_bookmarks';\n\nexport const useBookmarks = () => {\n  const { user } = useAuth();\n  const [bookmarks, setBookmarks] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const getLocalBookmarks = () => {\n    try {\n      return JSON.parse(localStorage.getItem(BOOKMARKS_KEY) || '[]');\n    } catch { return []; }\n  };\n\n  const saveLocalBookmarks = (items) => {\n    localStorage.setItem(BOOKMARKS_KEY, JSON.stringify(items));\n  };\n\n  const fetchBookmarks = useCallback(async () => {\n    if (!user) {\n      setBookmarks(getLocalBookmarks());\n      return;\n    }\n    setLoading(true);\n    try {\n      const res = await fetch(`${API_URL}/api/bookmarks?user_id=${user.id}`);\n      if (res.ok) {\n        const data = await res.json();\n        setBookmarks(data);\n        saveLocalBookmarks(data);\n      } else {\n        setBookmarks(getLocalBookmarks());\n      }\n    } catch {\n      setBookmarks(getLocalBookmarks());\n    }\n    setLoading(false);\n  }, [user]);\n\n  useEffect(() => { fetchBookmarks(); }, [fetchBookmarks]);\n\n  const addBookmark = async (story) => {\n    const bookmark = {\n      story_id: story.id,\n      title: story.title,\n      summary: story.summary || '',\n      source: story.source || '',\n      category: story.category || 'General',\n      source_url: story.source_url || '',\n      saved_at: new Date().toISOString(),\n    };\n\n    const updated = [...bookmarks.filter(b => b.story_id !== story.id), bookmark];\n    setBookmarks(updated);\n    saveLocalBookmarks(updated);\n\n    if (user) {\n      try {\n        await fetch(`${API_URL}/api/bookmarks`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ user_id: user.id, ...bookmark }),\n        });\n      } catch (e) { console.error('Failed to sync bookmark:', e); }\n    }\n  };\n\n  const removeBookmark = async (storyId) => {\n    const updated = bookmarks.filter(b => b.story_id !== storyId);\n    setBookmarks(updated);\n    saveLocalBookmarks(updated);\n\n    if (user) {\n      try {\n        await fetch(`${API_URL}/api/bookmarks/${storyId}?user_id=${user.id}`, { method: 'DELETE' });\n      } catch (e) { console.error('Failed to remove bookmark:', e); }\n    }\n  };\n\n  const isBookmarked = (storyId) => bookmarks.some(b => b.story_id === storyId);\n\n  return { bookmarks, loading, addBookmark, removeBookmark, isBookmarked, fetchBookmarks };\n};\n","const DB_NAME = 'narvo_audio_cache';\nconst STORE_NAME = 'audio_files';\nconst DB_VERSION = 1;\n\nfunction openDB() {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n    request.onupgradeneeded = (e) => {\n      const db = e.target.result;\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME, { keyPath: 'story_id' });\n      }\n    };\n    request.onsuccess = (e) => resolve(e.target.result);\n    request.onerror = (e) => reject(e.target.error);\n  });\n}\n\nexport async function cacheAudio(storyId, audioUrl) {\n  try {\n    const db = await openDB();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    store.put({ story_id: storyId, audio_url: audioUrl, cached_at: new Date().toISOString() });\n    return new Promise((resolve, reject) => {\n      tx.oncomplete = () => resolve(true);\n      tx.onerror = () => reject(tx.error);\n    });\n  } catch (e) {\n    console.error('Failed to cache audio:', e);\n    return false;\n  }\n}\n\nexport async function getCachedAudio(storyId) {\n  try {\n    const db = await openDB();\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.get(storyId);\n    return new Promise((resolve) => {\n      request.onsuccess = () => resolve(request.result?.audio_url || null);\n      request.onerror = () => resolve(null);\n    });\n  } catch {\n    return null;\n  }\n}\n\nexport async function removeCachedAudio(storyId) {\n  try {\n    const db = await openDB();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    store.delete(storyId);\n    return new Promise((resolve) => {\n      tx.oncomplete = () => resolve(true);\n      tx.onerror = () => resolve(false);\n    });\n  } catch {\n    return false;\n  }\n}\n\nexport async function getAllCachedIds() {\n  try {\n    const db = await openDB();\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.getAllKeys();\n    return new Promise((resolve) => {\n      request.onsuccess = () => resolve(request.result || []);\n      request.onerror = () => resolve([]);\n    });\n  } catch {\n    return [];\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAudio } from '../contexts/AudioContext';\nimport { useBookmarks } from '../hooks/useBookmarks';\nimport { getAllCachedIds, removeCachedAudio } from '../lib/audioCache';\nimport { Bookmark, Play, Pause, Trash, Check } from '@phosphor-icons/react';\nimport { ListSkeleton } from '../components/Skeleton';\n\nconst BookmarksPage = () => {\n  const navigate = useNavigate();\n  const { playTrack, currentTrack, isPlaying } = useAudio();\n  const { bookmarks, loading } = useBookmarks();\n  const { removeBookmark } = useBookmarks();\n  const [cachedIds, setCachedIds] = useState([]);\n\n  useEffect(() => { getAllCachedIds().then(setCachedIds); }, []);\n\n  const handleRemove = async (storyId) => {\n    removeBookmark(storyId);\n    await removeCachedAudio(storyId);\n    setCachedIds(prev => prev.filter(id => id !== storyId));\n  };\n\n  const isCached = (storyId) => cachedIds.includes(storyId);\n\n  return (\n    <main className=\"flex-1 flex flex-col bg-background-dark min-w-0\" data-testid=\"bookmarks-page\">\n      <div className=\"h-12 md:h-14 flex items-center justify-between px-4 md:px-8 bg-surface/30 narvo-border-b shrink-0\">\n        <span className=\"mono-ui text-[10px] md:text-xs text-forest\">MODULE: <span className=\"text-primary\">SAVED_TRANSMISSIONS</span></span>\n        <span className=\"mono-ui text-[10px] md:text-xs text-forest\">{bookmarks.length} ITEMS</span>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pb-20 md:pb-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          {loading ? (\n            <ListSkeleton count={3} />\n          ) : (\n            <>\n              {bookmarks.length > 0 && (\n                <div className=\"narvo-border bg-surface/20 p-3 md:p-4 mb-6 md:mb-8 flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-2 h-2 bg-primary animate-pulse\" />\n                    <span className=\"mono-ui text-[9px] md:text-[10px] text-forest\">OFFLINE_CACHE: <span className=\"text-primary\">{cachedIds.filter(id => bookmarks.some(b => b.story_id === id)).length} / {bookmarks.length}</span></span>\n                  </div>\n                  <span className=\"mono-ui text-[8px] md:text-[9px] text-forest/50 sm:ml-auto\">Play to cache audio</span>\n                </div>\n              )}\n\n              {bookmarks.length === 0 ? (\n                <div className=\"narvo-border bg-surface/20 p-8 md:p-12 text-center\">\n                  <Bookmark className=\"w-10 h-10 md:w-12 md:h-12 text-forest mx-auto mb-3 md:mb-4\" />\n                  <h3 className=\"font-display text-lg md:text-xl text-content mb-2 uppercase\">No Saved Stories</h3>\n                  <p className=\"text-forest text-xs md:text-sm mb-4 md:mb-6 font-mono\">Bookmark stories to access them offline.</p>\n                  <Link to=\"/dashboard\" className=\"bg-primary text-background-dark font-display font-bold px-4 md:px-6 py-2 md:py-3 text-sm md:text-base hover:bg-white transition-all inline-block\" data-testid=\"go-to-feed-btn\">\n                    [Go to Feed]\n                  </Link>\n                </div>\n              ) : (\n                <div className=\"narvo-border bg-surface/20 divide-y divide-forest/10\" data-testid=\"bookmarks-list\">\n                  {bookmarks.map((item) => (\n                    <div key={item.story_id} className=\"p-4 md:p-6 group hover:bg-surface/40 transition-colors cursor-pointer\" onClick={() => navigate(`/news/${item.story_id}`)} data-testid={`bookmark-card-${item.story_id}`}>\n                      <div className=\"flex flex-col gap-2 md:gap-3\">\n                        <div className=\"flex flex-wrap justify-between items-start gap-2\">\n                          <div className=\"flex items-center gap-2 md:gap-3\">\n                            <span className=\"bg-forest/20 text-primary mono-ui text-[8px] md:text-[9px] px-1.5 md:px-2 py-0.5 border border-forest/30\">{item.category?.toUpperCase()}</span>\n                            {isCached(item.story_id) && (\n                              <span className=\"mono-ui text-[7px] md:text-[8px] text-forest flex items-center gap-1 border border-forest/30 px-1 md:px-1.5 py-0.5\" data-testid={`cached-badge-${item.story_id}`}>\n                                <Check className=\"w-2.5 h-2.5 md:w-3 md:h-3\" /> CACHED\n                              </span>\n                            )}\n                          </div>\n                          <span className=\"mono-ui text-[7px] md:text-[8px] text-forest/50\">{item.source}</span>\n                        </div>\n                        <h3 className=\"font-display text-base md:text-xl font-bold uppercase tracking-tight text-content group-hover:text-primary transition-colors leading-tight\">{item.title}</h3>\n                        <p className=\"text-xs md:text-sm text-forest font-mono leading-relaxed opacity-70 line-clamp-2\">{item.summary}</p>\n                        <div className=\"flex items-center gap-3 md:gap-6 pt-1\">\n                          <button onClick={(e) => { e.stopPropagation(); playTrack({ id: item.story_id, title: item.title, summary: item.summary, source: item.source }); }} className=\"mono-ui text-[9px] md:text-[10px] text-primary flex items-center gap-2 hover:text-content transition-colors\" data-testid={`play-bookmark-${item.story_id}`}>\n                            {currentTrack?.id === item.story_id && isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n                            <span className=\"hidden sm:inline\">{isCached(item.story_id) ? 'PLAY_OFFLINE' : 'GENERATE_AUDIO'}</span>\n                            <span className=\"sm:hidden\">PLAY</span>\n                          </button>\n                          <div className=\"flex-1 h-[1px] bg-forest/10 hidden md:block\" />\n                          <span className=\"mono-ui text-[7px] md:text-[8px] text-forest/50 hidden md:inline\">SAVED: {new Date(item.saved_at).toLocaleDateString()}</span>\n                          <button onClick={(e) => { e.stopPropagation(); handleRemove(item.story_id); }} className=\"text-forest hover:text-red-400 transition-colors ml-auto md:ml-0\" data-testid={`remove-bookmark-${item.story_id}`}>\n                            <Trash className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </main>\n  );\n};\n\nexport default BookmarksPage;\n","import * as e from \"react\";\nconst a = /* @__PURE__ */ new Map([\n  [\n    \"bold\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M184,28H72A20,20,0,0,0,52,48V224a12,12,0,0,0,18.36,10.18l57.63-36,57.65,36A12,12,0,0,0,204,224V48A20,20,0,0,0,184,28Zm-4,24V154.35l-45.65-28.53a12,12,0,0,0-12.72,0L76,154.35V52ZM134.35,173.82a12,12,0,0,0-12.72,0L76,202.35v-19.7l52-32.5,52,32.5v19.7Z\" }))\n  ],\n  [\n    \"duotone\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M192,176v48l-64-40L64,224V176l64-40Z\", opacity: \"0.2\" }), /* @__PURE__ */ e.createElement(\"path\", { d: \"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Zm0,16V161.57l-51.77-32.35a8,8,0,0,0-8.48,0L72,161.56V48ZM132.23,177.22a8,8,0,0,0-8.48,0L72,209.57V180.43l56-35,56,35v29.14Z\" }))\n  ],\n  [\n    \"fill\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32ZM132.23,177.22a8,8,0,0,0-8.48,0L72,209.57V180.43l56-35,56,35v29.14Z\" }))\n  ],\n  [\n    \"light\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M184,34H72A14,14,0,0,0,58,48V224a6,6,0,0,0,9.18,5.09l60.81-38,60.83,38A6,6,0,0,0,198,224V48A14,14,0,0,0,184,34ZM72,46H184a2,2,0,0,1,2,2V165.18l-54.83-34.27a6,6,0,0,0-6.36,0L70,165.17V48A2,2,0,0,1,72,46Zm59.17,132.91a6,6,0,0,0-6.36,0L70,213.17V179.33l58-36.25,58,36.25v33.84Z\" }))\n  ],\n  [\n    \"regular\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Zm0,16V161.57l-51.77-32.35a8,8,0,0,0-8.48,0L72,161.56V48ZM132.23,177.22a8,8,0,0,0-8.48,0L72,209.57V180.43l56-35,56,35v29.14Z\" }))\n  ],\n  [\n    \"thin\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M184,36H72A12,12,0,0,0,60,48V224a4,4,0,0,0,6.12,3.39L128,188.72l61.89,38.67A4,4,0,0,0,192,228a4.06,4.06,0,0,0,1.94-.5A4,4,0,0,0,196,224V48A12,12,0,0,0,184,36ZM72,44H184a4,4,0,0,1,4,4V168.78l-57.89-36.17a4,4,0,0,0-4.24,0L68,168.78V48A4,4,0,0,1,72,44Zm58.11,136.61a4,4,0,0,0-4.24,0L68,216.78V178.22l60-37.5,60,37.5v38.56Z\" }))\n  ]\n]);\nexport {\n  a as default\n};\n","import * as o from \"react\";\nimport e from \"../lib/IconBase.es.js\";\nimport t from \"../defs/Bookmark.es.js\";\nconst r = o.forwardRef((a, m) => /* @__PURE__ */ o.createElement(e, { ref: m, ...a, weights: t }));\nr.displayName = \"BookmarkIcon\";\nconst k = r;\nexport {\n  k as Bookmark,\n  r as BookmarkIcon\n};\n","import * as e from \"react\";\nconst a = /* @__PURE__ */ new Map([\n  [\n    \"bold\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z\" }))\n  ],\n  [\n    \"duotone\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\n      \"path\",\n      {\n        d: \"M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z\",\n        opacity: \"0.2\"\n      }\n    ), /* @__PURE__ */ e.createElement(\"path\", { d: \"M205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z\" }))\n  ],\n  [\n    \"fill\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z\" }))\n  ],\n  [\n    \"light\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M228.24,76.24l-128,128a6,6,0,0,1-8.48,0l-56-56a6,6,0,0,1,8.48-8.48L96,191.51,219.76,67.76a6,6,0,0,1,8.48,8.48Z\" }))\n  ],\n  [\n    \"regular\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z\" }))\n  ],\n  [\n    \"thin\",\n    /* @__PURE__ */ e.createElement(e.Fragment, null, /* @__PURE__ */ e.createElement(\"path\", { d: \"M226.83,74.83l-128,128a4,4,0,0,1-5.66,0l-56-56a4,4,0,0,1,5.66-5.66L96,194.34,221.17,69.17a4,4,0,1,1,5.66,5.66Z\" }))\n  ]\n]);\nexport {\n  a as default\n};\n","import * as e from \"react\";\nimport t from \"../lib/IconBase.es.js\";\nimport a from \"../defs/Check.es.js\";\nconst o = e.forwardRef((c, r) => /* @__PURE__ */ e.createElement(t, { ref: r, ...c, weights: a }));\no.displayName = \"CheckIcon\";\nconst n = o;\nexport {\n  n as Check,\n  o as CheckIcon\n};\n"],"names":["API_URL","process","BOOKMARKS_KEY","useBookmarks","user","useAuth","bookmarks","setBookmarks","useState","loading","setLoading","getLocalBookmarks","JSON","parse","localStorage","getItem","_unused","saveLocalBookmarks","items","setItem","stringify","fetchBookmarks","useCallback","async","res","fetch","concat","id","ok","data","json","_unused2","useEffect","addBookmark","bookmark","story_id","story","title","summary","source","category","source_url","saved_at","Date","toISOString","updated","filter","b","method","headers","body","_objectSpread","user_id","e","console","error","removeBookmark","storyId","isBookmarked","some","STORE_NAME","openDB","Promise","resolve","reject","request","indexedDB","open","onupgradeneeded","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","getCachedAudio","tx","transaction","objectStore","get","_request$result","audio_url","removeCachedAudio","delete","oncomplete","getAllCachedIds","getAllKeys","_unused3","BookmarksPage","navigate","useNavigate","playTrack","currentTrack","isPlaying","useAudio","cachedIds","setCachedIds","then","isCached","includes","_jsxs","className","children","_jsx","length","ListSkeleton","count","_Fragment","Bookmark","Link","to","map","item","_item$category","onClick","toUpperCase","Check","stopPropagation","Pause","Play","toLocaleDateString","prev","handleRemove","Trash","a","Map","d","opacity","r","o","m","ref","weights","t","displayName","k","c","n"],"sourceRoot":""}