"use strict";(self.webpackChunknarvo_frontend=self.webpackChunknarvo_frontend||[]).push([[266],{5986(e,t,s){s.d(t,{I:()=>l});s(5043);var a=s(3216),r=s(579);const l=e=>{let{tag:t,className:s=""}=e;const l=(0,a.Zp)();return(0,r.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),l("/search?q=".concat(encodeURIComponent(t)))},className:"narvo-border px-1.5 py-1 mono-ui text-[10px] text-content hover:bg-primary hover:text-background-dark hover:border-primary cursor-pointer transition-colors ".concat(s),"data-testid":"hashtag-".concat(t.toLowerCase()),children:["#",t.toUpperCase()]})}},7302(e,t,s){s.d(t,{Ay:()=>c,Oi:()=>o,_N:()=>n,c$:()=>l,if:()=>i});s(5043);var a=s(579);const r=e=>{let{className:t="",variant:s="rect"}=e;const r="animate-pulse bg-forest/10";return"circle"===s?(0,a.jsx)("div",{className:"".concat(r," rounded-full ").concat(t)}):"text"===s?(0,a.jsx)("div",{className:"".concat(r," h-4 ").concat(t)}):(0,a.jsx)("div",{className:"".concat(r," ").concat(t)})},l=()=>(0,a.jsxs)("div",{className:"narvo-border bg-surface/30 flex flex-col md:flex-row min-h-[320px]",children:[(0,a.jsx)("div",{className:"md:w-1/2 bg-forest/5 min-h-[200px]"}),(0,a.jsxs)("div",{className:"flex-1 p-8 flex flex-col justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(r,{variant:"text",className:"w-40 h-3"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-8"}),(0,a.jsx)(r,{variant:"text",className:"w-3/4 h-8"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-4 mt-4"}),(0,a.jsx)(r,{variant:"text",className:"w-2/3 h-4"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(r,{className:"flex-1 h-12"}),(0,a.jsx)(r,{className:"w-12 h-12"}),(0,a.jsx)(r,{className:"w-12 h-12"})]})]})]}),o=()=>(0,a.jsxs)("div",{className:"p-6 narvo-border-b",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(r,{variant:"text",className:"w-24 h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-14 h-4"})]}),(0,a.jsx)(r,{variant:"text",className:"w-20 h-4"})]}),(0,a.jsx)(r,{variant:"text",className:"w-full h-6 mb-2"}),(0,a.jsx)(r,{variant:"text",className:"w-3/4 h-6 mb-3"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-2/3 h-4 mt-1"})]}),i=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r,{className:"w-20 h-6"}),(0,a.jsx)(r,{className:"w-20 h-6"})]}),(0,a.jsx)(r,{variant:"text",className:"w-full h-12"}),(0,a.jsx)(r,{variant:"text",className:"w-4/5 h-12"}),(0,a.jsxs)("div",{className:"border-l-2 border-forest/20 pl-6 space-y-2",children:[(0,a.jsx)(r,{variant:"text",className:"w-full h-5"}),(0,a.jsx)(r,{variant:"text",className:"w-3/4 h-5"})]}),(0,a.jsx)(r,{className:"w-full h-[400px]"}),(0,a.jsx)(r,{className:"w-full h-16"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(r,{variant:"text",className:"w-full h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-full h-4"}),(0,a.jsx)(r,{variant:"text",className:"w-2/3 h-4"})]})]}),n=e=>{let{count:t=4}=e;return(0,a.jsx)("div",{className:"narvo-border bg-surface/20 divide-y divide-forest/10",children:Array.from({length:t}).map((e,t)=>(0,a.jsx)(o,{},t))})},c=r},526(e,t,s){s.d(t,{A:()=>d});var a=s(5043),r=s(6539),l=s(4336),o=s(8415),i=s(1245),n=s(579);const c={VERIFIED:{icon:o.o,color:"text-green-400",bg:"bg-green-400/10",border:"border-green-400/30",label:"VERIFIED"},DISPUTED:{icon:i.Q,color:"text-red-400",bg:"bg-red-400/10",border:"border-red-400/30",label:"DISPUTED"},UNVERIFIED:{icon:l.v,color:"text-yellow-400",bg:"bg-yellow-400/10",border:"border-yellow-400/30",label:"UNVERIFIED"},PENDING:{icon:r.N,color:"text-forest",bg:"bg-forest/10",border:"border-forest/30",label:"CHECKING..."}},d=e=>{let{storyId:t,compact:s=!1}=e;const[l,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{t?fetch("".concat("http://localhost:8000","/api/factcheck/story/").concat(t)).then(e=>e.ok?e.json():null).then(e=>{e&&o(e),d(!1)}).catch(()=>d(!1)):d(!1)},[t]),i)return(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 mono-ui text-[9px] md:text-[10px] text-forest border border-forest/30 font-bold",children:[(0,n.jsx)(r.N,{className:"w-3 h-3 animate-spin"}),!s&&"VERIFYING..."]});const x=(null===l||void 0===l?void 0:l.status)||"UNVERIFIED",m=c[x]||c.UNVERIFIED,p=m.icon,h=(null===l||void 0===l?void 0:l.source)||"UNKNOWN",b=(null===l||void 0===l?void 0:l.confidence)||0;return s?(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 mono-ui text-[9px] font-bold ".concat(m.color," ").concat(m.bg," ").concat(m.border," border"),"data-testid":"truth-tag-".concat(t),title:"".concat(m.label," (").concat(b,"%) \u2014 ").concat(h),children:[(0,n.jsx)(p,{className:"w-3 h-3",weight:"PENDING"===x?"regular":"bold"}),m.label]}):(0,n.jsxs)("div",{className:"flex items-center gap-2 p-2 ".concat(m.bg," border ").concat(m.border),"data-testid":"truth-tag-".concat(t),children:[(0,n.jsx)(p,{className:"w-4 h-4 ".concat(m.color),weight:"PENDING"===x?"regular":"bold"}),(0,n.jsxs)("div",{className:"flex flex-col gap-0.5 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"mono-ui text-[11px] font-bold ".concat(m.color),children:m.label}),(0,n.jsxs)("span",{className:"mono-ui text-[9px] text-forest/60",children:[b,"%"]})]}),(0,n.jsx)("span",{className:"mono-ui text-[9px] text-forest truncate",children:h})]})]})}},8851(e,t,s){s.d(t,{T:()=>n});var a=s(9379),r=s(5043),l=s(4395);const o="http://localhost:8000",i="narvo_bookmarks",n=()=>{const{user:e}=(0,l.A)(),[t,s]=(0,r.useState)([]),[n,c]=(0,r.useState)(!1),d=()=>{try{return JSON.parse(localStorage.getItem(i)||"[]")}catch(e){return[]}},x=e=>{localStorage.setItem(i,JSON.stringify(e))},m=(0,r.useCallback)(async()=>{if(e){c(!0);try{const t=await fetch("".concat(o,"/api/bookmarks?user_id=").concat(e.id));if(t.ok){const e=await t.json();s(e),x(e)}else s(d())}catch(t){s(d())}c(!1)}else s(d())},[e]);(0,r.useEffect)(()=>{m()},[m]);return{bookmarks:t,loading:n,addBookmark:async r=>{const l={story_id:r.id,title:r.title,summary:r.summary||"",source:r.source||"",category:r.category||"General",source_url:r.source_url||"",saved_at:(new Date).toISOString()},i=[...t.filter(e=>e.story_id!==r.id),l];if(s(i),x(i),e)try{await fetch("".concat(o,"/api/bookmarks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,a.A)({user_id:e.id},l))})}catch(n){console.error("Failed to sync bookmark:",n)}},removeBookmark:async a=>{const r=t.filter(e=>e.story_id!==a);if(s(r),x(r),e)try{await fetch("".concat(o,"/api/bookmarks/").concat(a,"?user_id=").concat(e.id),{method:"DELETE"})}catch(l){console.error("Failed to remove bookmark:",l)}},isBookmarked:e=>t.some(t=>t.story_id===e),fetchBookmarks:m}}},8266(e,t,s){s.r(t),s.d(t,{default:()=>S});var a=s(9379),r=s(5043),l=s(3216),o=s(6930),i=s(9367),n=s(9717),c=s(2377),d=s(344),x=s(1111),m=s(6391),p=s(4989),h=s(3494),b=s(9468),f=s(2680),u=s(7505),g=s(1739),j=s(7945),v=s(1872),N=s(1353),y=s(3988),w=s(8851),k=s(1225),_=s(7302),E=s(526),A=s(5986),I=s(579);const C="http://localhost:8000",D=e=>{var t,s,a,l;let{news:o,readTime:i,relatedNews:n,isBookmarked:c,toggleBookmark:x,addToQueue:h,shareStory:b,navigate:f,showAlert:u,t:g,formatPublishedDate:N}=e;const[y,w]=(0,r.useState)(!0);return(0,I.jsxs)("div",{className:"lg:hidden mt-8 narvo-border","data-testid":"mobile-article-metadata",children:[(0,I.jsxs)("button",{onClick:()=>w(e=>!e),className:"w-full p-4 flex items-center justify-between bg-surface/10 hover:bg-surface/20 transition-colors","data-testid":"mobile-metadata-toggle",children:[(0,I.jsx)("span",{className:"mono-ui text-[12px] text-forest font-bold tracking-widest uppercase",children:g("news_detail.article_metadata")}),y?(0,I.jsx)(p.Z,{weight:"bold",className:"w-4 h-4 text-forest"}):(0,I.jsx)(m.a,{weight:"bold",className:"w-4 h-4 text-forest"})]}),y&&(0,I.jsxs)("div",{className:"p-4 space-y-5 narvo-border-t",children:[(0,I.jsxs)("div",{className:"narvo-border bg-primary/5 p-3 border-primary/30",children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] text-forest block mb-2 font-bold tracking-widest",children:g("news_detail.verification_status")}),(0,I.jsx)(E.A,{storyId:o.id})]}),(0,I.jsxs)("div",{className:"narvo-border bg-surface/20 p-3",children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] text-forest block mb-2 font-bold tracking-widest",children:g("news_detail.signal_metadata")}),(0,I.jsx)("div",{className:"space-y-2",children:[[g("news_detail.category"),(null===(t=o.category)||void 0===t?void 0:t.toUpperCase())||"GENERAL",!0],[g("news_detail.source"),(null===(s=o.source)||void 0===s?void 0:s.toUpperCase())||"UNKNOWN",!1],[g("news_detail.region"),(null===(a=o.region)||void 0===a?void 0:a.toUpperCase())||"AFRICA",!1],[g("news_detail.read_time"),"".concat(i," MIN"),!0],[g("news_detail.ai_synthesis"),o.narrative?g("news_detail.complete"):g("news_detail.pending"),!0]].map((e,t)=>{let[s,a,r]=e;return(0,I.jsxs)("div",{className:"flex justify-between mono-ui text-[11px]",children:[(0,I.jsx)("span",{className:"text-forest",children:s}),(0,I.jsx)("span",{className:r?"text-primary font-bold":"text-content",children:a})]},t)})})]}),(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsxs)("button",{onClick:()=>{h(o),u({type:"sync",title:"QUEUE_UPDATED",message:"Added to playlist queue",code:"Q_ADD",duration:2e3})},className:"flex-1 narvo-border py-2 mono-ui text-[11px] text-forest hover:text-primary hover:border-primary flex items-center justify-center gap-2 transition-colors","data-testid":"mobile-queue-btn",children:[(0,I.jsx)(j.o,{weight:"bold",className:"w-3 h-3"}),"QUEUE"]}),(0,I.jsxs)("button",{onClick:b,className:"flex-1 narvo-border py-2 mono-ui text-[11px] text-forest hover:text-primary hover:border-primary flex items-center justify-center gap-2 transition-colors","data-testid":"mobile-share-btn",children:[(0,I.jsx)(v.s,{weight:"bold",className:"w-3 h-3"}),"SHARE"]}),(0,I.jsxs)("button",{onClick:x,className:"flex-1 narvo-border py-2 mono-ui text-[11px] flex items-center justify-center gap-2 transition-colors ".concat(c(o.id)?"text-primary border-primary":"text-forest hover:text-primary hover:border-primary"),"data-testid":"mobile-bookmark-btn",children:[(0,I.jsx)(d.D,{weight:c(o.id)?"fill":"regular",className:"w-3 h-3"}),c(o.id)?g("dashboard.saved"):g("dashboard.save")]})]}),(null===(l=o.tags)||void 0===l?void 0:l.length)>0&&(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] text-forest block mb-3 font-bold tracking-widest",children:g("news_detail.signal_tags")}),(0,I.jsx)("div",{className:"flex flex-wrap gap-1.5",children:o.tags.map((e,t)=>(0,I.jsx)(A.I,{tag:e},t))})]}),n.length>0&&(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] text-forest block mb-3 font-bold tracking-widest",children:g("news_detail.related_transmissions")}),(0,I.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,I.jsxs)("div",{className:"narvo-border p-3 cursor-pointer hover:bg-surface/40 transition-colors group",onClick:()=>f("/news/".concat(e.id)),"data-testid":"mobile-related-".concat(e.id),children:[(0,I.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,I.jsx)("span",{className:"mono-ui text-[10px] text-primary",children:e.source}),(0,I.jsx)(E.A,{storyId:e.id,compact:!0})]}),(0,I.jsx)("h4",{className:"text-xs text-content font-display font-bold leading-tight group-hover:text-primary transition-colors line-clamp-2",children:e.title})]},e.id))})]})]})]})},S=()=>{var e,t,s,m,p,S,U,O,R;const{id:T}=(0,l.g)(),P=(0,l.Zp)(),[B,L]=(0,r.useState)(null),[F,K]=(0,r.useState)(!0),[G,V]=(0,r.useState)([]),[M,Q]=(0,r.useState)(0),{playTrack:H,forcePlayTrack:q,addToQueue:J,currentTrack:W,isPlaying:Y,voiceModel:Z,broadcastLanguage:z,settingsLoaded:$}=(0,y.n)(),{isBookmarked:X,addBookmark:ee,removeBookmark:te}=(0,w.T)(),{showAlert:se}=(0,k.nA)(),{t:ae}=(0,o.Bd)(),re=(0,r.useRef)(!1);(0,r.useEffect)(()=>{K(!0),re.current=!1,Promise.all([fetch("".concat(C,"/api/news/").concat(T)).then(e=>e.ok?e.json():null),fetch("".concat(C,"/api/news?limit=6")).then(e=>e.json()).catch(()=>[])]).then(e=>{let[t,s]=e;if(!t)return void P("/dashboard");L(t);const a=s.filter(e=>e.id!==T&&e.category===t.category),r=s.filter(e=>e.id!==T&&e.category!==t.category);V([...a,...r].slice(0,3));const l=(t.narrative||t.summary||"").split(/\s+/).length;Q(Math.max(1,Math.ceil(l/200))),K(!1)}).catch(()=>P("/dashboard"))},[T,P]);const[le,oe]=(0,r.useState)(!1),ie=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!B||F||!$)return;const e=B.narrative||B.summary||B.title||"";if(!e)return;const t=Z||"emma",s=z||"en";fetch("".concat(C,"/api/tts/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e.slice(0,4e3),voice_id:t,language:s})}).then(e=>e.ok?e.json():null).then(e=>{null!==e&&void 0!==e&&e.audio_url&&(ie.current=e.audio_url),oe(!0)}).catch(()=>oe(!0))},[B,F,$,Z,z]),(0,r.useEffect)(()=>{if(le&&B&&!re.current){re.current=!0;const e=ie.current?(0,a.A)((0,a.A)({},B),{},{url:ie.current}):B;q(e)}},[le,B,q]);const ne=()=>{X(B.id)?(te(B.id),se("BOOKMARK_REMOVED")):(ee(B),se("BOOKMARK_ADDED"))},ce=async()=>{const e="".concat(C,"/api/share/").concat(B.id),t="".concat(B.title," - Listen on NARVO");if(navigator.share)try{await navigator.share({title:B.title,text:t,url:e}),se({type:"success",title:"SHARED_SUCCESS",message:"Story shared successfully.",code:"SHARE_OK"})}catch(s){"AbortError"!==s.name&&(await navigator.clipboard.writeText(e),se({type:"sync",title:"LINK_COPIED",message:"Story link copied to clipboard.",code:"CLIP_OK"}))}else await navigator.clipboard.writeText(e),se({type:"sync",title:"LINK_COPIED",message:"Story link copied to clipboard.",code:"CLIP_OK"})},de=e=>{if(!e)return"Today";try{const t=new Date(e),s=new Date,a=Math.floor((s-t)/36e5);return a<1?"Just now":a<24?"".concat(a,"h ago"):a<48?"Yesterday":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}};if(F||!B)return(0,I.jsxs)("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[(0,I.jsx)("section",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-background-dark custom-scroll","data-testid":"news-detail-loading",children:(0,I.jsx)("div",{className:"max-w-3xl mx-auto py-8 md:py-12 px-4 md:px-8",children:(0,I.jsx)(_.if,{})})}),(0,I.jsxs)("aside",{className:"w-80 hidden xl:flex flex-col narvo-border-l bg-background-dark shrink-0",children:[(0,I.jsx)("div",{className:"h-20 narvo-border-b bg-surface/10"}),(0,I.jsx)("div",{className:"p-6 space-y-6",children:(0,I.jsx)("div",{className:"narvo-border bg-surface/20 p-4 space-y-3",children:Array.from({length:4}).map((e,t)=>(0,I.jsx)("div",{className:"h-4 bg-forest/10 animate-pulse"},t))})})]})]});const xe=(B.narrative||B.summary||"").split("\n").filter(e=>e.trim()),me=(null===W||void 0===W?void 0:W.id)===B.id&&Y;return(0,I.jsxs)("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[(0,I.jsxs)(i.mg,{children:[(0,I.jsxs)("title",{children:[B.title," \u2014 NARVO"]}),(0,I.jsx)("meta",{property:"og:title",content:B.title}),(0,I.jsx)("meta",{property:"og:description",content:(null===(e=B.narrative)||void 0===e?void 0:e.slice(0,160))||"Listen on Narvo \u2014 Audio-first news for Africa"}),(0,I.jsx)("meta",{property:"og:type",content:"article"}),(0,I.jsx)("meta",{property:"og:url",content:"".concat(window.location.origin,"/news/").concat(T)}),(0,I.jsx)("meta",{property:"og:image",content:"".concat(C,"/api/og/").concat(T)}),(0,I.jsx)("meta",{property:"og:site_name",content:"NARVO"}),(0,I.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,I.jsx)("meta",{name:"twitter:title",content:B.title}),(0,I.jsx)("meta",{name:"twitter:description",content:(null===(t=B.narrative)||void 0===t?void 0:t.slice(0,160))||"Audio-first news for Africa"}),(0,I.jsx)("meta",{name:"twitter:image",content:"".concat(C,"/api/og/").concat(T)})]}),(0,I.jsx)("section",{className:"flex-1 overflow-y-auto overflow-x-hidden relative bg-background-dark custom-scroll","data-testid":"news-detail-page",children:(0,I.jsxs)("div",{className:"max-w-3xl mx-auto py-8 md:py-12 px-4 md:px-8 pb-32 md:pb-40",children:[(0,I.jsxs)("div",{className:"mb-4 md:mb-6 flex items-center justify-between",children:[(0,I.jsxs)("button",{onClick:()=>P("/dashboard"),className:"mono-ui text-[12px] md:text-xs text-forest hover:text-primary flex items-center gap-2 transition-colors","data-testid":"back-btn",children:[(0,I.jsx)(n.n,{weight:"bold",className:"w-4 h-4"}),(0,I.jsx)("span",{children:ae("news_detail.back_to_feed")})]}),(0,I.jsx)("div",{className:"flex items-center gap-3",children:(0,I.jsx)(E.A,{storyId:B.id})})]}),(0,I.jsxs)("div",{className:"mb-6 md:mb-10",children:[(0,I.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-4 md:mb-6",children:[(0,I.jsxs)("div",{className:"flex gap-0 narvo-border w-fit",children:[(0,I.jsx)("span",{className:"px-2 md:px-3 py-1 narvo-border-r text-[11px] md:text-[12px] font-bold uppercase tracking-wider text-primary bg-background-dark font-mono",children:B.category||"General"}),null===(s=B.tags)||void 0===s?void 0:s.slice(0,1).map((e,t)=>(0,I.jsx)(A.I,{tag:e,className:"border-0 bg-background-dark text-primary text-[11px] md:text-[12px] px-2 md:px-3 py-1 tracking-wider"},t))]}),(0,I.jsxs)("div",{className:"flex items-center gap-4 mono-ui text-[11px] md:text-[12px] text-forest",children:[(0,I.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,I.jsx)(h.z,{weight:"bold",className:"w-3 h-3"}),M," MIN READ"]}),(0,I.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,I.jsx)(b.k,{weight:"bold",className:"w-3 h-3"}),de(B.published)]})]})]}),(0,I.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-content leading-[1.1] tracking-tight mb-4 md:mb-6 font-display uppercase","data-testid":"news-title",children:B.title}),(0,I.jsx)("p",{className:"text-base md:text-lg lg:text-xl text-slate-300 font-light leading-relaxed font-display border-l-2 border-forest pl-4 md:pl-6",children:B.summary})]}),(0,I.jsxs)("figure",{className:"mb-8 md:mb-12 narvo-border relative group",children:[(0,I.jsx)("img",{alt:B.title,className:"w-full h-[200px] sm:h-[300px] md:h-[400px] object-cover opacity-90 grayscale-[20%] group-hover:grayscale-0 transition-all duration-500",src:B.image_url||"https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?auto=format&fit=crop&q=80&w=1200"}),(0,I.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background-dark narvo-border-t w-fit ml-auto",children:(0,I.jsxs)("figcaption",{className:"text-[11px] md:text-[12px] text-primary font-mono uppercase tracking-wider",children:["FIG 1.0 \u2014 ",B.source||"Source"," / ",B.category]})}),me&&(0,I.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-primary px-3 py-1.5",children:[(0,I.jsx)(x.C,{weight:"fill",className:"w-4 h-4 text-background-dark animate-pulse"}),(0,I.jsx)("span",{className:"mono-ui text-[11px] text-background-dark font-bold",children:"NOW_PLAYING"})]})]}),(0,I.jsxs)("div",{className:"narvo-border bg-surface/30 p-3 md:p-5 mb-8 md:mb-12 flex flex-col sm:flex-row items-start sm:items-center gap-3 md:gap-4",children:[(0,I.jsx)("button",{onClick:()=>H(B),className:"".concat(me?"bg-white":"bg-primary hover:bg-white"," text-background-dark w-10 h-10 md:w-12 md:h-12 flex items-center justify-center transition-all shrink-0"),"data-testid":"play-story-btn",children:me?(0,I.jsx)(u.v,{weight:"fill",className:"w-5 h-5"}):(0,I.jsx)(g.j,{weight:"fill",className:"w-5 h-5 ml-0.5"})}),(0,I.jsxs)("div",{className:"flex flex-col justify-center flex-1 min-w-0",children:[(0,I.jsx)("span",{className:"text-[11px] md:text-[12px] text-forest font-mono uppercase tracking-widest mb-1",children:ae(me?"news_detail.now_playing":"news_detail.narrative_audio")}),(0,I.jsxs)("span",{className:"text-xs md:text-sm text-content font-medium font-display uppercase tracking-wide truncate",children:[null===(m=B.title)||void 0===m?void 0:m.slice(0,50),"..."]})]}),(0,I.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 w-full sm:w-auto sm:ml-auto",children:[(0,I.jsxs)("button",{className:"hidden md:flex narvo-border px-3 py-1.5 items-center gap-2 hover:bg-forest hover:text-content transition-colors",children:[(0,I.jsx)(N.H,{weight:"bold",className:"w-4 h-4 text-primary"}),(0,I.jsx)("span",{className:"text-[12px] text-primary font-mono font-bold uppercase tracking-wider",children:"West African English"})]}),(0,I.jsx)("button",{className:"md:hidden narvo-border p-2 text-primary",children:(0,I.jsx)(N.H,{weight:"bold",className:"w-4 h-4"})}),(0,I.jsx)("button",{onClick:ce,className:"narvo-border w-10 h-10 flex items-center justify-center text-forest hover:text-primary transition-colors",title:"Share Story","data-testid":"share-story-btn",children:(0,I.jsx)(v.s,{weight:"bold",className:"w-5 h-5"})}),(0,I.jsx)("button",{onClick:ne,className:"narvo-border w-10 h-10 flex items-center justify-center transition-colors ".concat(X(B.id)?"text-primary border-primary":"text-forest hover:text-primary"),"data-testid":"bookmark-detail-btn",children:(0,I.jsx)(d.D,{weight:X(B.id)?"fill":"regular",className:"w-5 h-5"})})]})]}),(null===(p=B.key_takeaways)||void 0===p?void 0:p.length)>0&&(0,I.jsxs)("div",{className:"narvo-border bg-transparent p-4 md:p-6 mb-8 md:mb-12 relative overflow-hidden",children:[(0,I.jsx)("div",{className:"absolute top-0 left-0 w-1 h-full bg-forest"}),(0,I.jsxs)("h3",{className:"text-base md:text-lg font-bold text-content mb-3 md:mb-4 flex items-center gap-2 font-display uppercase tracking-tight",children:[(0,I.jsx)(f.g,{weight:"fill",className:"text-primary w-4 h-4 md:w-5 md:h-5"}),ae("news_detail.key_takeaways")]}),(0,I.jsx)("ul",{className:"space-y-2 md:space-y-3",children:B.key_takeaways.map((e,t)=>(0,I.jsxs)("li",{className:"flex items-start gap-2 md:gap-3 text-slate-300 text-sm md:text-base leading-relaxed",children:[(0,I.jsx)("span",{className:"mt-1.5 md:mt-2 w-1.5 h-1.5 bg-primary shrink-0"}),(0,I.jsx)("span",{children:e})]},t))})]}),(0,I.jsx)("article",{className:"prose prose-invert prose-sm md:prose-lg max-w-none",children:xe.length>0?xe.map((e,t)=>(0,I.jsxs)(r.Fragment,{children:[(0,I.jsx)("p",{className:"text-slate-300 font-light leading-relaxed mb-4 md:mb-6 text-sm md:text-base",children:e}),1===t&&xe.length>2&&(0,I.jsxs)("div",{className:"my-6 md:my-8 p-4 md:p-6 narvo-border bg-transparent relative",children:[(0,I.jsx)("span",{className:"absolute top-0 left-0 bg-background-dark px-2 -mt-3 text-primary text-2xl md:text-4xl leading-none font-display",children:'"'}),(0,I.jsx)("p",{className:"italic text-primary font-display text-base md:text-xl leading-relaxed mb-2",children:"The narrative isn't just information; it's context. Pull one thread, and the whole story changes."}),(0,I.jsx)("cite",{className:"text-[12px] md:text-xs font-mono text-slate-500 not-italic uppercase tracking-widest",children:"\u2014 Narvo AI Synthesis"})]})]},t)):(0,I.jsx)("p",{className:"text-slate-300 font-light leading-relaxed text-sm md:text-base",children:B.summary})}),(0,I.jsxs)("div",{className:"mt-8 md:mt-12 narvo-border bg-surface/20 p-4 md:p-6",children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] md:text-[12px] text-forest block mb-2 md:mb-3 font-bold tracking-widest",children:ae("news_detail.source_attribution")}),(0,I.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"text-content font-display font-bold text-sm md:text-base",children:B.source}),(0,I.jsx)("span",{className:"mono-ui text-[11px] md:text-[12px] text-forest block mt-1",children:de(B.published)})]}),(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsxs)("button",{onClick:ce,className:"narvo-border px-3 md:px-4 py-2 mono-ui text-[11px] md:text-[12px] text-forest hover:text-primary flex items-center gap-2 transition-colors","data-testid":"share-source-btn",children:[(0,I.jsx)(v.s,{weight:"bold",className:"w-3 h-3"}),(0,I.jsx)("span",{children:ae("dashboard.share")})]}),B.source_url&&(0,I.jsxs)("a",{href:B.source_url,target:"_blank",rel:"noopener noreferrer",className:"narvo-border px-3 md:px-4 py-2 mono-ui text-[11px] md:text-[12px] text-forest hover:text-primary flex items-center gap-2 transition-colors",children:[(0,I.jsx)(c.B,{weight:"bold",className:"w-3 h-3"}),(0,I.jsx)("span",{children:ae("news_detail.original_source")})]})]})]})]}),(0,I.jsx)(D,{news:B,readTime:M,relatedNews:G,isBookmarked:X,toggleBookmark:ne,addToQueue:J,shareStory:ce,navigate:P,showAlert:se,t:ae,formatPublishedDate:de})]})}),(0,I.jsxs)("aside",{className:"w-72 xl:w-80 hidden lg:flex flex-col narvo-border-l bg-background-dark shrink-0","data-testid":"detail-sidebar",children:[(0,I.jsx)("div",{className:"h-16 xl:h-20 flex items-center px-4 xl:px-6 narvo-border-b bg-surface/10",children:(0,I.jsx)("span",{className:"mono-ui text-[12px] xl:text-xs font-bold text-forest tracking-widest uppercase",children:ae("news_detail.article_metadata")})}),(0,I.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 xl:p-6 space-y-6 xl:space-y-8 custom-scroll",children:[(0,I.jsxs)("div",{className:"narvo-border bg-primary/5 p-3 xl:p-4 border-primary/30",children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] xl:text-[12px] text-forest block mb-2 xl:mb-3 font-bold tracking-widest",children:ae("news_detail.verification_status")}),(0,I.jsx)(E.A,{storyId:B.id})]}),(0,I.jsxs)("div",{className:"narvo-border bg-surface/20 p-3 xl:p-4",children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] xl:text-[12px] text-forest block mb-2 xl:mb-3 font-bold tracking-widest",children:ae("news_detail.signal_metadata")}),(0,I.jsxs)("div",{className:"space-y-2 xl:space-y-3",children:[(0,I.jsxs)("div",{className:"flex justify-between mono-ui text-[11px] xl:text-[12px]",children:[(0,I.jsx)("span",{className:"text-forest",children:ae("news_detail.category")}),(0,I.jsx)("span",{className:"text-primary font-bold",children:(null===(S=B.category)||void 0===S?void 0:S.toUpperCase())||"GENERAL"})]}),(0,I.jsxs)("div",{className:"flex justify-between mono-ui text-[11px] xl:text-[12px]",children:[(0,I.jsx)("span",{className:"text-forest",children:ae("news_detail.source")}),(0,I.jsx)("span",{className:"text-content",children:(null===(U=B.source)||void 0===U?void 0:U.toUpperCase())||"UNKNOWN"})]}),(0,I.jsxs)("div",{className:"flex justify-between mono-ui text-[11px] xl:text-[12px]",children:[(0,I.jsx)("span",{className:"text-forest",children:ae("news_detail.region")}),(0,I.jsx)("span",{className:"text-content",children:(null===(O=B.region)||void 0===O?void 0:O.toUpperCase())||"AFRICA"})]}),(0,I.jsxs)("div",{className:"flex justify-between mono-ui text-[11px] xl:text-[12px]",children:[(0,I.jsx)("span",{className:"text-forest",children:ae("news_detail.read_time")}),(0,I.jsxs)("span",{className:"text-primary font-bold",children:[M," MIN"]})]}),(0,I.jsxs)("div",{className:"flex justify-between mono-ui text-[11px] xl:text-[12px]",children:[(0,I.jsx)("span",{className:"text-forest",children:ae("news_detail.ai_synthesis")}),(0,I.jsx)("span",{className:"text-primary font-bold",children:B.narrative?ae("news_detail.complete"):ae("news_detail.pending")})]})]})]}),(0,I.jsxs)("div",{className:"flex gap-2",children:[(0,I.jsxs)("button",{onClick:()=>{J(B),se({type:"sync",title:"QUEUE_UPDATED",message:"Added to playlist queue",code:"Q_ADD",duration:2e3})},className:"flex-1 narvo-border py-2 mono-ui text-[11px] xl:text-[12px] text-forest hover:text-primary hover:border-primary flex items-center justify-center gap-2 transition-colors","data-testid":"sidebar-queue-btn",children:[(0,I.jsx)(j.o,{weight:"bold",className:"w-3 h-3"}),"QUEUE"]}),(0,I.jsxs)("button",{onClick:ce,className:"flex-1 narvo-border py-2 mono-ui text-[11px] xl:text-[12px] text-forest hover:text-primary hover:border-primary flex items-center justify-center gap-2 transition-colors","data-testid":"sidebar-share-btn",children:[(0,I.jsx)(v.s,{weight:"bold",className:"w-3 h-3"}),"SHARE"]}),(0,I.jsxs)("button",{onClick:ne,className:"flex-1 narvo-border py-2 mono-ui text-[11px] xl:text-[12px] flex items-center justify-center gap-2 transition-colors ".concat(X(B.id)?"text-primary border-primary":"text-forest hover:text-primary hover:border-primary"),"data-testid":"sidebar-bookmark-btn",children:[(0,I.jsx)(d.D,{weight:X(B.id)?"fill":"regular",className:"w-3 h-3"}),X(B.id)?ae("dashboard.saved"):ae("dashboard.save")]})]}),(null===(R=B.tags)||void 0===R?void 0:R.length)>0&&(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] xl:text-[12px] text-forest block mb-3 xl:mb-4 font-bold tracking-widest",children:ae("news_detail.signal_tags")}),(0,I.jsx)("div",{className:"flex flex-wrap gap-1.5 xl:gap-2",children:B.tags.map((e,t)=>(0,I.jsx)(A.I,{tag:e,className:"xl:px-2 xl:text-[11px]"},t))})]}),G.length>0&&(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"mono-ui text-[11px] xl:text-[12px] text-forest block mb-3 xl:mb-4 font-bold tracking-widest",children:ae("news_detail.related_transmissions")}),(0,I.jsx)("div",{className:"space-y-2 xl:space-y-3",children:G.map(e=>(0,I.jsxs)("div",{className:"narvo-border p-3 xl:p-4 cursor-pointer hover:bg-surface/40 transition-colors group",onClick:()=>P("/news/".concat(e.id)),"data-testid":"related-".concat(e.id),children:[(0,I.jsxs)("div",{className:"flex items-center gap-2 mb-1 xl:mb-2",children:[(0,I.jsx)("span",{className:"mono-ui text-[10px] xl:text-[11px] text-primary",children:e.source}),(0,I.jsx)(E.A,{storyId:e.id,compact:!0})]}),(0,I.jsx)("h4",{className:"text-xs xl:text-sm text-content font-display font-bold leading-tight group-hover:text-primary transition-colors line-clamp-2",children:e.title})]},e.id))})]})]})]})]})}}}]);
//# sourceMappingURL=266.a701255c.chunk.js.map